webpackJsonp([1],{"/M3h":function(t,e){},"0+j+":function(t,e){},"3aoI":function(t,e){},"6AuZ":function(t,e){},"7fGa":function(t,e){},"9MDj":function(t,e){},AjEd:function(t,e){},BHn2:function(t,e){},CLEt:function(t,e){},"HB+j":function(t,e){},NM7Y:function(t,e){},OdHO:function(t,e){},PCM8:function(t,e){},Qbzi:function(t,e){},SFD1:function(t,e){},SnRW:function(t,e){},Toax:function(t,e){},"TsY+":function(t,e){},"UO+K":function(t,e){},XqVO:function(t,e){},"ZC+V":function(t,e){},ZRue:function(t,e){},Zmqa:function(t,e){},hzVx:function(t,e){},kR8Z:function(t,e){},m0Bu:function(t,e){},p7X3:function(t,e){},pFZ8:function(t,e,n){var i={"./af":"nqC2","./af.js":"nqC2","./ar":"tHRT","./ar-dz":"2iw2","./ar-dz.js":"2iw2","./ar-kw":"soBb","./ar-kw.js":"soBb","./ar-ly":"zjQ3","./ar-ly.js":"zjQ3","./ar-ma":"11uP","./ar-ma.js":"11uP","./ar-sa":"yM2J","./ar-sa.js":"yM2J","./ar-tn":"k9UU","./ar-tn.js":"k9UU","./ar.js":"tHRT","./az":"H/ZR","./az.js":"H/ZR","./be":"NcWj","./be.js":"NcWj","./bg":"ux43","./bg.js":"ux43","./bm":"SHxi","./bm.js":"SHxi","./bn":"mhJc","./bn.js":"mhJc","./bo":"LyiZ","./bo.js":"LyiZ","./br":"eXAx","./br.js":"eXAx","./bs":"e6JA","./bs.js":"e6JA","./ca":"Nq9b","./ca.js":"Nq9b","./cs":"UHZy","./cs.js":"UHZy","./cv":"A9HL","./cv.js":"A9HL","./cy":"VZG9","./cy.js":"VZG9","./da":"ucoA","./da.js":"ucoA","./de":"crTT","./de-at":"Tz0t","./de-at.js":"Tz0t","./de-ch":"thUw","./de-ch.js":"thUw","./de.js":"crTT","./dv":"3FyJ","./dv.js":"3FyJ","./el":"soCQ","./el.js":"soCQ","./en-au":"dDC6","./en-au.js":"dDC6","./en-ca":"a+lM","./en-ca.js":"a+lM","./en-gb":"M9nR","./en-gb.js":"M9nR","./en-ie":"Mg3b","./en-ie.js":"Mg3b","./en-il":"FnyN","./en-il.js":"FnyN","./en-nz":"k7mD","./en-nz.js":"k7mD","./eo":"jXmb","./eo.js":"jXmb","./es":"6C4d","./es-do":"obsI","./es-do.js":"obsI","./es-us":"6PAY","./es-us.js":"6PAY","./es.js":"6C4d","./et":"vuD1","./et.js":"vuD1","./eu":"u5y6","./eu.js":"u5y6","./fa":"tFrz","./fa.js":"tFrz","./fi":"X+Ax","./fi.js":"X+Ax","./fo":"Rh5s","./fo.js":"Rh5s","./fr":"TOjj","./fr-ca":"ruqB","./fr-ca.js":"ruqB","./fr-ch":"00Y2","./fr-ch.js":"00Y2","./fr.js":"TOjj","./fy":"SRJb","./fy.js":"SRJb","./gd":"0IH4","./gd.js":"0IH4","./gl":"xKUt","./gl.js":"xKUt","./gom-latn":"mXUA","./gom-latn.js":"mXUA","./gu":"KJ90","./gu.js":"KJ90","./he":"Lb8N","./he.js":"Lb8N","./hi":"zKrU","./hi.js":"zKrU","./hr":"c7Tt","./hr.js":"c7Tt","./hu":"nPYQ","./hu.js":"nPYQ","./hy-am":"xP+R","./hy-am.js":"xP+R","./id":"b/5h","./id.js":"b/5h","./is":"NBPu","./is.js":"NBPu","./it":"j638","./it.js":"j638","./ja":"+4ei","./ja.js":"+4ei","./jv":"zTBq","./jv.js":"zTBq","./ka":"0yQz","./ka.js":"0yQz","./kk":"bHch","./kk.js":"bHch","./km":"WKL0","./km.js":"WKL0","./kn":"3YHI","./kn.js":"3YHI","./ko":"Q+Dq","./ko.js":"Q+Dq","./ky":"CcNt","./ky.js":"CcNt","./lb":"M5Vs","./lb.js":"M5Vs","./lo":"o/Sk","./lo.js":"o/Sk","./lt":"cLY9","./lt.js":"cLY9","./lv":"RGDN","./lv.js":"RGDN","./me":"FD3J","./me.js":"FD3J","./mi":"GwqZ","./mi.js":"GwqZ","./mk":"uQI5","./mk.js":"uQI5","./ml":"T6pu","./ml.js":"T6pu","./mn":"yxpo","./mn.js":"yxpo","./mr":"bPiS","./mr.js":"bPiS","./ms":"2OOo","./ms-my":"KSMX","./ms-my.js":"KSMX","./ms.js":"2OOo","./mt":"Nh9e","./mt.js":"Nh9e","./my":"/XOG","./my.js":"/XOG","./nb":"Ae3M","./nb.js":"Ae3M","./ne":"I2Mq","./ne.js":"I2Mq","./nl":"q8N+","./nl-be":"iNpx","./nl-be.js":"iNpx","./nl.js":"q8N+","./nn":"i67k","./nn.js":"i67k","./pa-in":"adWD","./pa-in.js":"adWD","./pl":"+rcL","./pl.js":"+rcL","./pt":"oklR","./pt-br":"gJMY","./pt-br.js":"gJMY","./pt.js":"oklR","./ro":"sk37","./ro.js":"sk37","./ru":"+4Xv","./ru.js":"+4Xv","./sd":"Jt7/","./sd.js":"Jt7/","./se":"oN7S","./se.js":"oN7S","./si":"+QYi","./si.js":"+QYi","./sk":"egU1","./sk.js":"egU1","./sl":"aGJs","./sl.js":"aGJs","./sq":"GtSw","./sq.js":"GtSw","./sr":"KvrN","./sr-cyrl":"maSq","./sr-cyrl.js":"maSq","./sr.js":"KvrN","./ss":"rkEC","./ss.js":"rkEC","./sv":"goqJ","./sv.js":"goqJ","./sw":"C+kv","./sw.js":"C+kv","./ta":"fqly","./ta.js":"fqly","./te":"E4H0","./te.js":"E4H0","./tet":"/++u","./tet.js":"/++u","./tg":"Hw/J","./tg.js":"Hw/J","./th":"OxV8","./th.js":"OxV8","./tl-ph":"26rn","./tl-ph.js":"26rn","./tlh":"ZWUx","./tlh.js":"ZWUx","./tr":"Ygbz","./tr.js":"Ygbz","./tzl":"cYDi","./tzl.js":"cYDi","./tzm":"RfCZ","./tzm-latn":"ZY5v","./tzm-latn.js":"ZY5v","./tzm.js":"RfCZ","./ug-cn":"2gWI","./ug-cn.js":"2gWI","./uk":"II8x","./uk.js":"II8x","./ur":"CREB","./ur.js":"CREB","./uz":"G9HU","./uz-latn":"Swdd","./uz-latn.js":"Swdd","./uz.js":"G9HU","./vi":"gkPr","./vi.js":"gkPr","./x-pseudo":"9yAS","./x-pseudo.js":"9yAS","./yo":"3Xqy","./yo.js":"3Xqy","./zh-cn":"HZyc","./zh-cn.js":"HZyc","./zh-hk":"ITl9","./zh-hk.js":"ITl9","./zh-tw":"RXqC","./zh-tw.js":"RXqC"};function a(t){return n(s(t))}function s(t){var e=i[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}a.keys=function(){return Object.keys(i)},a.resolve=s,t.exports=a,a.id="pFZ8"},poOu:function(t,e){},rV1F:function(t,e){},"shd+":function(t,e){},uxEr:function(t,e){},vF4z:function(t,e){},vIqV:function(t,e){},vkxV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("IvJb"),a=(n("uxEr"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var s=n("C7Lr")({name:"App"},a,!1,function(t){n("kR8Z")},null,null).exports,r=n("IHPB"),o=n.n(r),c=n("zO6J"),l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("pt-layout",{attrs:{"fixed-block-basis":"40px",verticalMode:""}},[e("div",{staticClass:"layout-header",attrs:{slot:"first"},slot:"first"}),this._v(" "),e("pt-layout",{attrs:{slot:"second","fixed-block-basis":"220px"},slot:"second"},[e("layout-menu",{attrs:{slot:"first"},slot:"first"}),this._v(" "),e("router-view",{attrs:{slot:"second"},slot:"second"})],1)],1)},staticRenderFns:[]};var u=n("C7Lr")({name:"Layout"},l,!1,function(t){n("6AuZ")},"data-v-5fc7a9c4",null).exports,f=n("rVsN"),d=n.n(f),h=n("lC5x"),p=n.n(h),m=n("J0Oq"),g=n.n(m),v=n("AA3o"),y=n.n(v),C=n("xSur"),_=n.n(C),I=n("psq8"),k=n.n(I),x=function(){function t(e,n,i){var a=this;y()(this,t),this.onEdit=function(){a._dataMirror=k.a.cloneDeep(a.car._data)},this.onEditCancel=function(){a.car._data=a._dataMirror},this.onEditConfirm=function(){},this._car=e,this._refCar=n,this._isSelect=!1,this._isChecked=!1,this._status=-2,this._dataMirror={},this._validator=k.a.defaultTo(i,{}),this._confirmCheck=!1}return _()(t,[{key:"confirmCheck",set:function(t){this._confirmCheck=t},get:function(){return this._confirmCheck}},{key:"car",get:function(){return this._car}},{key:"isSelect",get:function(){return this._isSelect},set:function(t){this._isSelect=t}},{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._isChecked=t}},{key:"status",get:function(){return this._status},set:function(t){this._status=t}},{key:"statusText",get:function(){switch(this.status){case 0:return"重复";case-1:return"新增";case 1:return"覆盖";case 2:return"无效车辆信息";case 3:return"已完成此业务";case 4:return"未完成入库";default:return""}}},{key:"validator",get:function(){return this._validator}}]),t}(),b=n("6ROu"),D=n.n(b),w=function t(){y()(this,t)};w.carInfoConfig=[{key:"name",label:"品名",excelKey:"Model"},{key:"brand",label:"品牌",excelKey:"品牌"},{key:"specification",label:"规格",excelKey:"规格"},{key:"model",label:"型号",excelKey:"Model"},{key:"vId",label:"底盘号",excelKey:"底盘号"},{key:"eId",label:"发动机号",excelKey:"发动机号"},{key:"color",label:"外色",excelKey:"外色"},{key:"weight",label:"重量（千克）",excelKey:"Gross Weight (Kgs)"},{key:"displacement",label:"排量",excelKey:"排量"},{key:"productionDate",label:"生产日期",excelKey:"生产日期",resolveInitialValue:function(t){return t?D()("1900").add(t,"days").format("YYYY-MM-DD"):t}},{key:"taxId",label:"税号",excelKey:"税号"},{key:"customsClearanceAmount",label:"报关金额",excelKey:"报关价格"},{key:"insteadCollectionAndPaymentAmount",label:"代收代付金额",excelKey:"代收代付金额"},{key:"parkingLocation",label:"车辆停放位置",excelKey:"车辆停放位置"},{key:"inboundDate",label:"入库日期",excelKey:"入库日期",resolveInitialValue:function(t){return t?D()("1900").add(t,"days").format("YYYY-MM-DD"):t}},{key:"outboundDate",label:"出库日期",excelKey:"出库日期",resolveInitialValue:function(t){return t?D()("1900").add(t,"days").format("YYYY-MM-DD"):t}},{key:"carStyle",label:"车款",excelKey:"车款"},{key:"BL",label:"B/L",excelKey:"B/L"},{key:"capacity",label:"Capacity (c.c)",excelKey:"Capacity (c.c)",resolveInitialValue:function(t){if(t){var e=parseFloat(t);return k.a.isNaN(e)?"":e.toFixed(3)}return t}}];var S=w,L=n("aozt"),B=n.n(L),T=function(){function t(e,n,i){y()(this,t),this.name=n,this.axiosInstance=B.a.create({baseURL:e,withCredentials:!1}),this.baseUrl=e,this.baseOptions=i}return _()(t,[{key:"call",value:function(t,e,n,i,a){var s={url:this.baseUrl+"/"+this.name+t,params:n,method:e,data:i};return k.a.isEmpty(a)||(s=k.a.assign(s,a)),s.headers=k.a.assign(s.headers,this.baseOptions.headers),this.axiosInstance.request(s).then(function(t){return t.data}).catch(function(t){throw new Error(t)})}},{key:"get",value:function(t,e,n){return this.call(t,"get",e,null,n)}},{key:"delete",value:function(t,e,n){return this.call(t,"delete",e,null,n)}},{key:"post",value:function(t,e,n){return this.call(t,"post",null,e,n)}},{key:"put",value:function(t,e,n){return this.call(t,"put",null,e,n)}},{key:"patch",value:function(t,e,n){return this.call(t,"patch",null,e,n)}}]),t}(),E=function(){function t(){y()(this,t)}return _()(t,null,[{key:"getApiHost",value:function(t,e,n){return new T(t,e,n)}}]),t}(),R=E.getApiHost("https://cars-wms-api-test.ptit365.com","",{headers:{"Ocp-Apim-Subscription-Key":"95dbf455e50b40bdb64dbbc0401aee57"}}),A=function t(){y()(this,t)};A.fetchCars=function(t){var e="cars?"+k.a.reduce(t,function(t,e){return t+"&code="+e},"").substring(1);return R.get(e,"")},A.saveCars=function(t,e){return R.post("cars",{cars:t,note:e})},A.deleteCars=function(t){return R.delete("cars",{code:t})},A.getCarsAndReceiptList=function(t,e,n){return R.get("cars/list",{keyword:t,returnType:e,types:n})};var M=A,O=n("3cXf"),F=n.n(O),j=E.getApiHost("https://resource-api-test.ptit365.com","v1",{headers:{"Ocp-Apim-Subscription-Key":"ad91c2f95eab4af7aa1efe4adb9a6e60"}}),$=function t(){y()(this,t)};$.createOneResource=function(t,e){return j.post("/",t,e)},$.commitOneResouce=function(t,e,n){return j.post("/"+t,e,n)},$.putResource=function(t,e,n){return j.put("/"+t,e,n)},$.putLabels=function(t,e,n){return j.put("/"+t+"/labels",e,n)},$.getResourceDetail=function(t,e){return j.get("/"+t,"",e)},$.queryResourceByKey=function(t,e,n){return j.get("/query/"+t,e,n)},$.queryResourceContent=function(t,e,n,i){return j.get("/"+t+"/"+e,n,i)},$.deleteResource=function(t,e){return j.delete("/"+t,"",e)},$.deleteDataName=function(t,e,n,i){return j.delete("/"+t+"/"+e,n,i)},$.getKey=function(t,e){return j.get("/keys"+t,"",e)},$.setKey=function(t,e){return j.post("/keys",t,e)};var N=$,V=function t(){y()(this,t)};V.createOneResource=function(t){return N.createOneResource(t)},V.commitOneResouce=function(t,e,n){return N.commitOneResouce(t,e,n)},V.putResource=function(t,e,n,i,a){var s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],r=new FormData;return r.append("dataName",t),r.append("data",e),r.append("refreshToken",s),r.append("dataContentType","application/"+n),N.putResource(i,r,{headers:{"Content-Type":"multipart/form-data",operationToken:a}})},V.putLabels=function(t,e){return N.putLabels(t,e)},V.getResourceDetail=function(t){return N.getResourceDetail(t)},V.queryResourceByKey=function(t,e){return N.queryResourceByKey(t,e)},V.queryResourceContent=function(t,e,n){return N.queryResourceContent(t,e,n)},V.deleteResource=function(t,e){return N.deleteResource(t,{headers:{operationToken:e}})},V.deleteDataName=function(t,e,n,i){return N.deleteDataName(t,e,n,{headers:{operationToken:i}})},V.getKey=function(t){return N.getKey(t)},V.setKey=function(t,e){return N.setKey({keys:t,value:e})},V.putJsonResource=function(t,e,n,i){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return V.putResource(t,F()(e),"json",n,i,a)};var z=V,U=function(){function t(){var e,n=this;y()(this,t),this.onGenerateReceipt=(e=g()(p.a.mark(function t(e,i){var a,s,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a={},t.t0=i,t.next="inbound"===t.t0?4:"outbound"===t.t0?6:"import_certificate"===t.t0?8:"import_declaration"===t.t0?10:12;break;case 4:return a=n.createReceipt(e,"入库确认单","cars-inbound","RK"),t.abrupt("break",13);case 6:return a=n.createReceipt(e,"出库确认单","cars-outbound","CK"),t.abrupt("break",13);case 8:return a=n.createReceipt(e,"进口证明书","import_certificate","IC"),t.abrupt("break",13);case 10:return a=n.createReceipt(e,"进口报关单","import_declaration","ID"),t.abrupt("break",13);case 12:return t.abrupt("break",13);case 13:return s=[{key:"carsReceipt",value:"receipt/"+i+"/draft"},{key:"resource-type",value:a.resourceType},{key:"type",value:i},{key:"typeName",value:a.typeName},{key:"title",value:a.title},{key:"updateTime",value:D()().format("YYYY-MM-DD HH:mm:ss")},{key:"carIds",value:a.carIds.join(",")},{key:"receiptCode",value:a.receiptCode}],t.next=16,z.createOneResource(s);case 16:return r=t.sent,t.next=19,z.putJsonResource("carsReceipt",a.carObjs,r.uid,r.operationToken);case 19:return t.abrupt("return",r.uid);case 20:case"end":return t.stop()}},t,n)})),function(t,n){return e.apply(this,arguments)})}return _()(t,[{key:"createReceipt",value:function(t,e,n,i){var a=D()().format("YYYY-MM-DD HH:mm:ss"),s=i+"_"+D()(a).format("YYYYMMDDHHmmss"),r=[];switch(n){case"cars-inbound":r=k.a.filter(t,function(t){return 1!=(1&t.car.status)});break;case"cars-outbound":r=k.a.filter(t,function(t){return 16!=(16&t.car.status)&&1==(1&t.car.status)});break;case"import_declaration":r=k.a.filter(t,function(t){return 4!=(4&t.car.status)&&1==(1&t.car.status)});break;case"import_certificate":r=k.a.filter(t,function(t){return 8!=(8&t.car.status)&&1==(1&t.car.status)});break;default:r=[]}return{typeName:e,resourceType:n,receiptCode:s,carIds:k.a.map(r,function(t){return t.car.vId}),title:e+" "+a,carObjs:k.a.map(r,function(t){return[{key:"vId",value:t.car.vId}]})}}},{key:"checkedItemCanShouldGenerateReceipt",value:function(t,e){switch(t){case"inbound":return k.a.some(e,function(t){return 1!=(1&t.car.status)});case"outbound":return k.a.some(e,function(t){return 16!=(16&t.car.status)&&1==(1&t.car.status)});case"import_declaration":return k.a.some(e,function(t){return 4!=(4&t.car.status)&&1==(1&t.car.status)});case"import_certificate":return k.a.some(e,function(t){return 8!=(8&t.car.status)&&1==(1&t.car.status)});default:return!1}}}]),t}(),H=n("ZLEe"),q=n.n(H),Y=n("jMcx"),P=n.n(Y),W=function(){function t(e,n,i,a){y()(this,t),this.$message="",this.$propertyName=e,this.$isValid=!0,this.$target=i,this.$validate=k.a.bind(n,this),this.$context=a,this.$skipOnce=!1}return _()(t,[{key:"must",value:function(t,e){return t.apply(this,[this.value])?this.success():this.error(e)}},{key:"required",value:function(t){return!k.a.isEmpty(this.value)||k.a.isNumber(this.value)||k.a.isDate(this.value)?this.success():this.error(t)}},{key:"integer",value:function(t){return/^\d*$/.test(this.value)?this.success():this.error(t)}},{key:"numeric",value:function(t){return/^\d*.?\d{1,3}$/.test(this.value)?this.success():this.error(t)}},{key:"validate",value:function(){return this.$skipOnce?(this.$skipOnce=!1,!0):this.$validate()}},{key:"skipOnce",value:function(){this.$skipOnce=!0}},{key:"error",value:function(t){return this.$message=t,this.$isValid=!1,!1}},{key:"success",value:function(){return this.$message="",this.$isValid=!0,!0}},{key:"message",get:function(){return this.$message}},{key:"propertyName",get:function(){return this.$propertyName}},{key:"isValid",get:function(){return this.$isValid}},{key:"target",get:function(){return this.$target}},{key:"context",get:function(){return this.$context}},{key:"value",get:function(){var t=this.propertyName.split(".");return k.a.reduce(t,function(t,e){return k.a.property(e)(t)},this.target)}}]),t}(),K=function(){return function(){return[]}},G=function(t,e){return function(){var n=k.a.clone(t);return k.a.isEmpty(e)||(k.a.isString(e)?n[e]=!0:n=k.a.extend(n,e)),n}},J=function(t){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};return k.a.forOwn(t,function(t,a){i[a]=new W(a,t,e,n)}),i.validate=function(){var t=k.a.filter(k.a.values(i),function(t){return k.a.isObject(t)&&k.a.isFunction(t.validate)});return k.a.reduce(t,function(t,e){return e.validate()&&t},!0)},i}},Z=function(t,e){var n=t.toUpperCase().indexOf(e.toUpperCase());return n>=0?[t.substring(0,n),t.substring(n,e.length+n),t.substring(e.length+n)]:[t,"",""]},X=function(){function t(e,n,i){y()(this,t),Q.call(this),this._name=e,this._fieldsObject=k.a.keyBy(n,function(t){return t.name}),this._excelFieldsObject=k.a.keyBy(n,function(t){return t.excelKey}),this._fields=n,this._formatValue=!0,this._options=i||{}}return _()(t,[{key:"getOption",value:function(t,e){return k.a.defaultTo(this._options[t],e)}},{key:"isHiddenField",value:function(t,e){return this.isOptionField("hidden",t,e)}},{key:"isEditableField",value:function(t,e){return this.isOptionField("editable",t,e)}},{key:"isOptionField",value:function(t,e,n){var i=this,a=this.fieldsObject[e];return k.a.isUndefined(a)&&(a=k.a.reduce(this.fields,function(n,i){return k.a.isEmpty(n)?i.findField(t,e):n},{})),!k.a.isEmpty(a)&&k.a.some(a.getOption(t,[]),function(t){return t===i.name})?(n&&this.calculateOptionField(t,e,n),!0):!(!n||!this.calculateOptionField(t,e,n))}},{key:"calculateOptionField",value:function(t,e,n){if("hidden"===t){if("inbound"===e)return!(1==(1&k.a.defaultTo(n.getValue("status"),0)));if("outbound"===e)return!(16==(16&k.a.defaultTo(n.getValue("status"),0)))}return!1}},{key:"isDisableField",value:function(t,e){var n=this;if("vId"===t||"eId"===t)return k.a.defaultTo(e.getValue("status"),0)>0;var i=this.fieldsObject[t];return k.a.isUndefined(i)&&(i=k.a.reduce(this.fields,function(e,n){return k.a.isEmpty(e)?n.findField(t):e},{})),!k.a.isEmpty(i)&&k.a.some(i.getOption("disable",[]),function(t){return t===n.name})}},{key:"doNotFormatValue",value:function(){return this.formatValue=!1,this}},{key:"createValidator",value:function(t){var e={};return k.a.each(this.fields,function(t){return t.defineValidator(e)}),J(e)(t)}},{key:"asyncLoadByVIDs",value:function(){var t=g()(p.a.mark(function t(e){var n,i,a=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=k.a.isArray(e)?e:[e],t.next=3,M.fetchCars(n);case 3:return i=t.sent,t.abrupt("return",k.a.map(i,function(t){return a.createCarLine(t)}));case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"createCarLine",value:function(t,e){var n=e?this.createCarFromExcel(t):this.createCar(t);return new x(n,{},this.createValidator(n))}},{key:"createCarFromExcel",value:function(t){var e=[];return k.a.forOwn(this._excelFieldsObject,function(n){return e.push({key:n.name,value:t[n.excelKey]?t[n.excelKey].value:""})}),this.createCar(e)}},{key:"getOrderedFieldsByOption",value:function(t,e){return k.a.orderBy(this.fields,function(n){return n.getOption(t,e)})}},{key:"fields",get:function(){return this._fields}},{key:"fieldsObject",get:function(){return this._fieldsObject}},{key:"formatValue",get:function(){return this._formatValue},set:function(t){this._formatValue=t}},{key:"name",get:function(){return this._name}}]),t}(),Q=function(){var t=this;this.createCar=function(e){var n={},i=k.a.map(e,function(t){return t.key}),a=k.a.map(e,function(t){return t.value}),s=k.a.zipObject(i,a);n._data=s,k.a.each(t.fields,function(e){return e.defineCarProperty(n,s,t)});var r=t;return n.getValue=function(t){var e=s[t];if(k.a.isUndefined(r.fieldsObject[t])){var i=k.a.reduce(r.fields,function(e,n){return k.a.isEmpty(e)?n.findField(t):e},{});if(!k.a.isEmpty(i)&&!k.a.isEmpty(i.parent)&&(e=n.getValue(i.parent.name),!k.a.isUndefined(e))){var a=i.getOption("bitValue",0);e=(e&a)===a}}return e},n.toData=function(){var t=[],e=["status","inbound","outbound","import_declaration","import_certificate"];return k.a.each(q()(n._data),function(e){t.push({key:e,value:n._data[e]})}),k.a.remove(t,function(t){return e.includes(t.key)}),t},n},this.getGroupFieldsByOption=function(e,n){return k.a.groupBy(t.fields,function(t){return t.getOption(e,n)})}},tt=X,et=n("Yarq"),nt=n.n(et),it=n("UzKs"),at=n.n(it),st=n("khne"),rt=n.n(st),ot=n("Y7Ml"),ct=n.n(ot),lt=n("liLe"),ut=n.n(lt),ft={numberPrecision:3,defaultValue:"",contentWidth:"1"},dt=function(){function t(e,n,i,a,s,r){y()(this,t),this._name=e,this._label=n,this._excelKey=i,this._fieldType=a,this._options=k.a.chain({}).assign(ft).assign(r).value(),this._tags=s||{},this._parent={}}return _()(t,[{key:"findField",value:function(t){return this.name===t?this:{}}},{key:"getOption",value:function(t,e){return k.a.defaultTo(this.options[t],e)}},{key:"hasTags",value:function(t){var e=this,n=k.a.isArray(t)?t:[t];return k.a.every(n,function(t){return k.a.some(e.tags,function(e){return e===t})})}},{key:"formatValue",value:function(t,e){if(this.fieldType!==Boolean&&(k.a.isUndefined(t)||k.a.isEmpty(t)||k.a.isNull(t)))return this.options.defaultValue;switch(this.fieldType){case Number:var n=parseFloat(t);return k.a.isNaN(n)?"":n.toFixed(3);case Date:if(/^\d{5}(.\d{3})?$/.test(t))return D()("1900").add(t,"days").format("YYYY-MM-DD");break;case Boolean:if(!k.a.isEmpty(this.parent)){var i=this.getOption("bitValue",0);t=(e.getValue(this.parent.name)&i)===i}return t?this.getOption("trueValue",this.label+":是"):this.getOption("falseValue",this.label+":否")}return t}},{key:"getDefaultValue",value:function(){switch(this.fieldType){case Number:return 0;case Date:return D()().format("YYYY-MM-DD");case Boolean:return!1;case String:default:return""}}},{key:"defineCarProperty",value:function(t,e,n){var i=this;e[this.name]=k.a.defaultTo(e[this.name],this.getDefaultValue()),ut()(t,this.name,{set:function(t){e[i.name]=t},get:function(){return n.formatValue?i.formatValue(e[i.name],t):t.getValue(i.name)}})}},{key:"defineValidator",value:function(t){var e=this;t[this.name]=function(){if(e.getOption("required",!1)&&!this.required(e.label+"不能为空"))return!1;if(e.fieldType===Number&&!this.numeric("必须为数字"))return!1;var t=e.getOption("regexp",!1);if(t&&!this.must(function(e){return t.test(e)},e.getOption("regexErrorMessage","格式错误")))return!1;var n=e.getOption("minLength",!1);if(n&&!this.must(function(t){return(""+t).length>=n},"最小长度为"+n+"字符"))return!1;var i=e.getOption("maxLength",!1);return!(i&&!this.must(function(t){return(""+t).length<=i},"最大长度为"+i+"字符"))}}},{key:"parent",get:function(){return this._parent},set:function(t){this._parent=t}},{key:"name",get:function(){return this._name}},{key:"label",get:function(){return this._label}},{key:"excelKey",get:function(){return this._excelKey}},{key:"fieldType",get:function(){return this._fieldType}},{key:"options",get:function(){return this._options}},{key:"tags",get:function(){return this._tags}},{key:"type",get:function(){return"default"}},{key:"inputType",get:function(){return this.fieldType===Date?"date":"input"}}]),t}(),ht=function(t){function e(t,n){y()(this,e);var i=at()(this,(e.__proto__||nt()(e)).call(this,t.name,t.label,t.excelKey,t.fieldType,t.tags,t.options));return i._overrideOptions=n,i._innerField=t,i}return ct()(e,t),_()(e,[{key:"findField",value:function(t){return this.innerField.findField(t)}},{key:"defineCarProperty",value:function(t,e,n){return this._innerField.defineCarProperty(t,e,n)}},{key:"getOption",value:function(t,n){var i=this._overrideOptions[t];return k.a.defaultTo(i,rt()(e.prototype.__proto__||nt()(e.prototype),"getOption",this).call(this,t,n))}},{key:"type",get:function(){return"business"}},{key:"innerField",get:function(){return this._innerField}},{key:"children",get:function(){return this.innerField.children||[]}}]),e}(dt),pt=function(t){function e(t,n,i,a,s){y()(this,e);var r=at()(this,(e.__proto__||nt()(e)).call(this,t,n,"$$COMPOSITE_FILE","COMPOSITE",i,a));return r._children=s,k.a.each(r._children,function(t){return t.parent=r}),r}return ct()(e,t),_()(e,[{key:"findField",value:function(t){var n=rt()(e.prototype.__proto__||nt()(e.prototype),"findField",this).call(this,t);return k.a.isEmpty(n)&&(n=k.a.find(this.children,function(e){return!k.a.isEmpty(e.findField(t))})),k.a.defaultTo(n,{})}},{key:"defineCarProperty",value:function(t,n,i){rt()(e.prototype.__proto__||nt()(e.prototype),"defineCarProperty",this).call(this,t,n,i),k.a.each(this.children,function(e){return e.defineCarProperty(t,n,i)})}},{key:"children",get:function(){return this._children}},{key:"type",get:function(){return"composite"}}]),e}(dt),mt="BUSINESS_CAR_INFO",gt="BUSINESS_CAR_INFO_DETAIL",vt="BUSINESS_CAR_RECEIPT_INBOUND",yt="BUSINESS_CAR_RECEIPT_OUTBOUND",Ct={vId:new dt("vId","底盘号","底盘号",String,[mt,gt,vt,yt,"BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION","BUSINESS_RECEIPT_CERTIFICATE"],{contentWidth:"0 0 170px",contentAlign:"left",groupName:"车辆识别信息",required:!0,maxLength:20,minLength:15,regexp:/^[A-Za-z0-9]+$/,regexErrorMessage:"只能是数字或文本",readonlyStatus:["used"]}),eId:new dt("eId","发动机号","发动机号",String,[mt,gt,vt,yt,"BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION","BUSINESS_RECEIPT_CERTIFICATE"],{contentWidth:"0 0 120px",contentAlign:"left",groupName:"车辆识别信息",required:!0}),model:new dt("model","Model","Model",String,[mt,gt,vt,yt,"BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION","BUSINESS_RECEIPT_CERTIFICATE"],{contentWidth:"0 0 140px",groupName:"车辆规格信息"}),brand:new dt("brand","品牌","品牌",String,[mt,gt],{contentWidth:"0 0 80px",groupName:"车辆基础信息"}),specification:new dt("specification","规格","规格",String,[mt],{contentWidth:"0 0 100px",groupName:"车辆规格信息"}),color:new dt("color","外色","外色",String,[mt,gt],{contentWidth:"0 0 60px",groupName:"车辆外观信息"}),weight:new dt("weight","重量（千克）","Gross Weight (Kgs)",Number,[mt,gt],{contentWidth:"0 0 140px",groupName:"车辆规格信息"}),displacement:new dt("displacement","排量","排量",Number,[mt,gt],{contentWidth:"0 0 80px",groupName:"车辆规格信息"}),productionDate:new dt("productionDate","生产日期","生产日期",Date,[mt,gt],{contentWidth:"0 0 80px"}),inbound:new dt("inbound","入库确认单","入库确认单","CSV",[mt,gt],{hidden:[mt],disable:[gt],groupName:"车辆状态"}),outbound:new dt("outbound","出库确认单","出库确认单","CSV",[mt,gt],{hidden:[mt],disable:[gt],groupName:"车辆状态"}),capacity:new dt("capacity","Capacity (c.c)","Capacity (c.c)",Number,[mt,gt],{contentWidth:"0 0 140px",groupName:"车辆规格信息"}),BL:new dt("BL","B/L","B/L",String,[mt,gt],{contentWidth:"0 0 180px"}),inboundStatus:new dt("inbound-status","入库确认","入库确认",Boolean,[],{display:"icon",icon:"sign-in",trueValue:"入库确认单",falseValue:"未确认",bitValue:1}),outboundStatus:new dt("outbound-status","出库确认","出库确认",Boolean,[],{display:"icon",icon:"sign-out",trueValue:"出库确认单",falseValue:"未确认",bitValue:16}),inboundCustomReceipt:new dt("import_declaration","进境报关建议书","进口报关建议书号","CSV",["BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION",gt],{contentWidth:"0 0 220px",contentAlign:"left",editable:["BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION"],required:!0,suffix:!0,groupName:"车辆状态",disable:[gt],hidden:[mt]}),inboundCertificateReceipt:new dt("import_certificate","进口证明书","货物进口证明书","CSV",["BUSINESS_RECEIPT_CERTIFICATE",gt],{contentWidth:"0 0 220px",contentAlign:"left",editable:["BUSINESS_RECEIPT_CERTIFICATE"],required:!0,suffix:!0,groupName:"车辆状态",disable:[gt],hidden:[mt]}),inboundCustomStatus:new dt("inbound-custom-status","进境报关建议书","进口报关建议书号",Boolean,[],{display:"icon",icon:"file",trueValue:"进口报关单",falseValue:"未确认",bitValue:4}),inboundCertificateStatus:new dt("inbound-certificate-status","进口证明书","货物进口证明书",Boolean,[],{display:"icon",icon:"file-text",trueValue:"进口证明书",falseValue:"未确认",bitValue:8})},_t=new pt("status","状态",[mt,vt,yt,gt,"BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION","BUSINESS_RECEIPT_CERTIFICATE"],{contentWidth:"0 0 80px",hidden:[vt,yt,gt,"BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION","BUSINESS_RECEIPT_CERTIFICATE"]},[Ct.inboundStatus,Ct.outboundStatus,Ct.inboundCustomStatus,Ct.inboundCertificateStatus]),It={vId:new ht(Ct.vId,{listOrders:10}),eId:new ht(Ct.eId,{listOrders:20}),model:new ht(Ct.model,{listOrders:2}),brand:new ht(Ct.brand,{listOrders:30}),specification:new ht(Ct.specification,{listOrders:50}),color:new ht(Ct.color,{listOrders:60}),weight:new ht(Ct.weight,{listOrders:70}),BL:new ht(Ct.BL,{listOrders:80}),displacement:new ht(Ct.displacement,{listOrders:90}),productionDate:new ht(Ct.productionDate,{listOrders:100}),capacity:new ht(Ct.capacity,{listOrders:110}),statuses:new ht(_t,{listOrders:0,contentAlign:"center",contentWidth:"0 0 80px"})},kt=function(t){var e=k.a.chain(It).values().filter(function(e){return e.hasTags(t)}).value(),n=k.a.chain(Ct).values().filter(function(n){return n.hasTags(t)&&!k.a.some(e,function(t){return t.name===n.name})}).value();return e.concat(n)},xt={CarInfo:new tt(mt,kt(mt)),CarDetail:new tt(gt,kt(gt)).doNotFormatValue(),Inbound:new tt(vt,kt(vt)),Outbound:new tt(yt,kt(yt)),InboundCustomsDeclaration:new tt("BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION",kt("BUSINESS_RECEIPT_INBOUND_CUSTOMS_DECLARATION"),{statusValue:4,receiptType:"import_declaration"}),InboundCertificateReceipt:new tt("BUSINESS_RECEIPT_CERTIFICATE",kt("BUSINESS_RECEIPT_CERTIFICATE"),{statusValue:4,receiptType:"import_certificate"})},bt=function(){function t(){var e,n,i,a,s=this;y()(this,t),this.transformOriginalCarInfo=function(t){return k.a.reduce(S.carInfoConfig,function(e,n){var i=e;return t[n.excelKey]?n.resolveInitialValue?i[n.key]=n.resolveInitialValue(t[n.excelKey].value):i[n.key]=t[n.excelKey].value:i[n.key]="",i},{})},this.saveCarsForExcel=(e=g()(p.a.mark(function t(e,n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.saveCars(e,n));case 1:case"end":return t.stop()}},t,s)})),function(t,n){return e.apply(this,arguments)}),this.onShowDetail=function(t){s.batchAction&&t||(t||s.onDetailCancel(),s.isShowDetail=t)},this.onDetailEdit=g()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s.detailCarLine.onEdit(),s.isDetailEdit=!0;case 2:case"end":return t.stop()}},t,s)})),this.onDetailCancel=g()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s.detailCarLine.onEditCancel(),s.isDetailEdit=!1,s.isNewDetailCarLine=!1;case 3:case"end":return t.stop()}},t,s)})),this.onDetailSave=g()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s.detailCarLine.onEditConfirm(),t.next=3,s.saveCars([s.detailCarLine]);case 3:s.carsInfoList.includes(s.detailCarLine)||s.carsInfoList.unshift(s.detailCarLine),s.isDetailEdit=!1;case 5:case"end":return t.stop()}},t,s)})),this.onCarInfoSelect=function(t,e){var n=s.fetchListByType(e);k.a.each(n,function(t){t.isSelect=!1}),t.isSelect=!0},this.deleteCarInfo=(n=g()(p.a.mark(function t(e,n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return t.next=3,s.deleteCars(e);case 3:return t.abrupt("return",s.removeDeletedCarInfo(e,n));case 4:case"end":return t.stop()}},t,s)})),function(t,e){return n.apply(this,arguments)}),this.removeDeletedCarInfo=function(t,e){var n=s.fetchListByType(e);k.a.each(t,function(t){return n.splice(n.indexOf(t),1)})},this.fetchCheckedCarInfo=function(t){var e=s.fetchListByType(t);return k.a.filter(e,function(t){return t.isChecked})},this.fetchCheckedNotOriginalStatusCarInfo=function(t){var e=s.fetchListByType(t);return k.a.filter(e,function(t){return t.isChecked&&""+t.car.status=="0"})},this.onBatchAction=function(){s.onShowDetail(!1),s.batchAction=!0},this.onCancelBatchAction=function(){s.batchAction=!1,s.clearChecked()},this.onDialogBatchAction=function(){s.dialogBatchAction=!0},this.onCancelDialogBatchAction=function(){s.dialogBatchAction=!1,s.clearChecked("excel")},this.clearChecked=function(t){var e=s.fetchListByType(t);k.a.each(e,function(t){t.isChecked=!1})},this.fetchListByType=function(t){return"excel"===t?s.carsInfoListfromExcel:s.carsInfoList},this.modifyCarsToUsed=(i=g()(p.a.mark(function t(e,n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.all(k.a.map(e,function(){var t=g()(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.used=n;case 1:case"end":return t.stop()}},t,s)}));return function(e){return t.apply(this,arguments)}}()));case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}},t,s)})),function(t,e){return i.apply(this,arguments)}),this.onGenerateReceipt=(a=g()(p.a.mark(function t(e,n){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.resourceStore.onGenerateReceipt(e,n));case 1:case"end":return t.stop()}},t,s)})),function(t,e){return a.apply(this,arguments)}),this.isCheckedItemHasShouldInbound=function(){var t=s.fetchCheckedCarInfo();return k.a.some(t,function(t){return 1!=(1&t.car.status)})},this.isCheckedItemAllShouldInbound=function(){var t=s.fetchCheckedCarInfo();return!k.a.some(t,function(t){return 1==(1&t.car.status)})},this.isCheckedItemHasShouldOutbound=function(){var t=s.fetchCheckedCarInfo();return k.a.some(t,function(t){return 16!=(16&t.car.status)&&1==(1&t.car.status)})},this.isCheckedItemHasOrginalStatus=function(){var t=s.fetchCheckedCarInfo();return k.a.some(t,function(t){return""+t.car.status=="0"})},this.saveCars=function(t,e){var n=k.a.map(t,function(t){return t.car.toData()});return M.saveCars(n,e)},this.deleteCars=function(t){var e=k.a.map(t,function(t){return t.car.vId});return M.deleteCars(e.join(","))},this.resourceStore=new U,this._listBusiness=xt.CarInfo,this._detailBusiness=xt.CarDetail,this._detailValidator={},this._listFields=this._listBusiness.getOrderedFieldsByOption("listOrders",1/0),this.mode="list",this.carsInfoList=[],this.carsInfoListfromExcel=[],this.operationToken="",this.newUid="",this.isShowDetail=!1,this.isDetailEdit=!1,this.detailCarLine=new x(this._detailBusiness.createCar({}),{}),this.batchAction=!1,this.dialogBatchAction=!1,this.isNewDetailCarLine=!1}return _()(t,[{key:"loadCarsInfoList",value:function(){var t=g()(p.a.mark(function t(){var e,n,i=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.fetchCars([""]);case 2:e=t.sent,n=[],k.a.each(e,function(t){n.push(i.carsFactory(t))}),n.sort(function(t,e){return t.vId<e.vId?-1:t.vId>e.vId?1:0}),this.onShowDetail(!1),this.carsInfoList=n;case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"selectCarSInfoList",value:function(){var t=g()(p.a.mark(function t(e){var n,i,a,s=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!k.a.isArray(e.result)){t.next=8;break}return t.next=4,M.fetchCars(e.result);case 4:i=t.sent,k.a.each(i,function(t){n.push(s.carsFactory(t))}),t.next=12;break;case 8:return t.next=10,M.fetchCars([e.result]);case 10:a=t.sent,k.a.each(a,function(t){n.push(s.carsFactory(t))});case 12:this.onShowDetail(!1),this.carsInfoList=n;case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"carsFactory",value:function(t){return new x(this._listBusiness.createCar(t),{})}},{key:"getCarsFromExcelAndCompare",value:function(){var t=g()(p.a.mark(function t(e){var n,i,a,s=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=k.a.map(e,function(t){return t.car.vId}),t.next=3,M.fetchCars(n);case 3:i=t.sent,a=[],k.a.each(i,function(t){a.push(s.carsFactory(t))}),this.compareCarsListForExcelAndResorce(e,a);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"compareCarsListForExcelAndResorce",value:function(t,e){var n=this;0!==t.length&&k.a.each(t,function(t){var i=k.a.findIndex(e,function(e){return e.car.vId===t.car.vId});-1===i?t.status=-1:i>-1&&(t.status=n.compareCarModel(t.car,e[i].car))})}},{key:"compareCarModel",value:function(t,e){var n=0,i=k.a.map(t.toData(),function(t){return t.key});return k.a.each(i,function(i){t[i]!==e[i]&&(n=1)}),n}},{key:"goDetail",value:function(t){this.isDetailEdit=!1,t?(this.isNewDetailCarLine=!1,this.detailCarLine=t):(this.isNewDetailCarLine=!0,this.detailCarLine=new x(this._detailBusiness.createCar({}),{})),this._detailValidator=this._detailBusiness.createValidator(this.detailCarLine.car)}},{key:"queryCarsForSearching",value:function(){var t=g()(p.a.mark(function t(e){var n,i,a,s=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,i="vId,eId,note",a="vIds",t.abrupt("return",M.getCarsAndReceiptList(n,a,i).then(function(t){return k.a.map(t,function(t){return s.carsFactory(t)})}));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"checkedItemCanShouldGenerateReceipt",value:function(t){var e=this.fetchCheckedCarInfo();return this.resourceStore.checkedItemCanShouldGenerateReceipt(t,e)}},{key:"listFields",get:function(){return this._listFields}},{key:"listBusiness",get:function(){return this._listBusiness}},{key:"detailBusiness",get:function(){return this._detailBusiness}},{key:"detailValidator",get:function(){return this._detailValidator}},{key:"isAllChecked",get:function(){return this.carsInfoList.length&&!k.a.some(this.carsInfoList,function(t){return!t.isChecked})},set:function(t){k.a.each(this.carsInfoList,function(e){e.isChecked=t})}},{key:"isHasChecked",get:function(){return k.a.some(this.carsInfoList,function(t){return t.isChecked})}},{key:"isDialogAllChecked",get:function(){return this.carsInfoListfromExcel.length&&!k.a.some(this.carsInfoListfromExcel,function(t){return!t.isChecked})},set:function(t){k.a.each(this.carsInfoListfromExcel,function(e){e.isChecked=t})}},{key:"isDialogHasChecked",get:function(){return k.a.some(this.carsInfoListfromExcel,function(t){return t.isChecked})}}]),t}(),Dt={name:"cars-info-list-view",data:function(){return{carsInfoListManager:new bt,insertDialog:{show:!1,lines:[]}}},created:function(){this.loadCarsInfoList()},computed:{carsInfoList:{get:function(){return this.carsInfoListManager.carsInfoList}},detailCarLine:{get:function(){return this.carsInfoListManager.detailCarLine}},isNewDetailCarLine:{get:function(){return this.carsInfoListManager.isNewDetailCarLine}},isShowDetail:{get:function(){return this.carsInfoListManager.isShowDetail}},isDetailEdit:{get:function(){return this.carsInfoListManager.isDetailEdit}},batchAction:{get:function(){return this.carsInfoListManager.batchAction}},title:function(){return"车辆信息列表"},detailCarLineOriginalStatus:{get:function(){return""+this.detailCarLine.car.status=="0"}}},methods:{onCarImported:function(t){this.carsInfoListManager.getCarsFromExcelAndCompare(t),this.insertDialog.lines=t,this.insertDialog.show=!0},onShowInsertDialog:function(){this.insertDialog.show=!0},confirmDialog:function(){var t=this;this.$prompt("请输入备注信息","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S+/,inputErrorMessage:"备注信息不能为空或空格"}).then(function(e){var n=e.value;t.carsInfoListManager.saveCarsForExcel(t.insertDialog.lines,n).then(function(){t.carsInfoListManager.loadCarsInfoList(),t.insertDialog.show=!1,t.$message({type:"success",message:"添加成功！"})}).catch(function(){t.$message({type:"error",message:"添加失败！"})})})},loadCarsInfoList:function(){this.carsInfoListManager.loadCarsInfoList()},reset:function(){this.carsInfoListManager.loadCarsInfoList(),this.$refs.searchInput.text=""},onSelect:function(t){this.carsInfoListManager.selectCarSInfoList(t)},onShowDetail:function(t){this.carsInfoListManager.onShowDetail(t)},onCreateCarInfo:function(){this.carsInfoListManager.goDetail(),this.onShowDetail(!0),this.carsInfoListManager.onDetailEdit()},onCarInfoSelect:function(t){this.carsInfoListManager.onCarInfoSelect(t),this.goCarInfoDetail(t)},onExcelCarInfoSelect:function(t){this.carsInfoListManager.onCarInfoSelect(t,"excel")},goCarInfoDetail:function(t){this.carsInfoListManager.goDetail(t),this.onShowDetail(!0)},onDetailEdit:function(){this.carsInfoListManager.onDetailEdit()},onDetailCancel:function(){this.detailCarLine.car.vId||this.onShowDetail(!1),this.carsInfoListManager.onDetailCancel()},onDetailSave:function(){var t=this;this.carsInfoListManager.detailValidator.validate()&&this.carsInfoListManager.onDetailSave().then(function(){t.$message({type:"success",message:"保存成功！"})}).catch(function(){t.$message({type:"error",message:"保存失败！"})})},deleteCarInfo:function(t){var e=this;this.$confirm("此操作将永久删除该车辆信息, 是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.carsInfoListManager.deleteCarInfo([t]).then(function(){e.$message({type:"success",message:"删除成功！"}),e.emptyListCancelBatchAction()}).catch(function(){e.$message({type:"error",message:"删除失败！"})})}).catch(function(){e.$message({type:"info",message:"已取消删除！"})})},deleteExcelCarInfo:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.carsInfoListManager.deleteCarInfo([t],"excel").then(function(){e.$message({type:"success",message:"删除成功！"}),e.emptyListCancelBatchAction("excel")}).catch(function(){e.$message({type:"error",message:"删除失败！"})})}).catch(function(){e.$message({type:"info",message:"已取消删除！"})})},onBatchAction:function(){this.carsInfoListManager.onBatchAction()},onCancelBatchAction:function(){this.carsInfoListManager.onCancelBatchAction()},onBatchDelete:function(){var t=this;if(this.carsInfoListManager.isHasChecked&&this.carsInfoListManager.isCheckedItemHasOrginalStatus()){var e=this.carsInfoListManager.fetchCheckedNotOriginalStatusCarInfo();this.$confirm("共"+e.length+"条车辆信息可删除，此操作将永久删除这些车辆信息, 是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.carsInfoListManager.deleteCarInfo(e).then(function(){t.$message({type:"success",message:"删除成功！"}),t.emptyListCancelBatchAction()}).catch(function(){t.$message({type:"error",message:"删除失败！"})})}).catch(function(){t.$message({type:"info",message:"已取消删除！"})})}else this.$message({type:"info",message:"无可删除项！"})},onDialogBatchAction:function(){this.carsInfoListManager.onDialogBatchAction()},onCancelDialogBatchAction:function(){this.carsInfoListManager.onCancelDialogBatchAction()},onDialogBatchDelete:function(){var t=this;this.carsInfoListManager.isDialogHasChecked?this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.carsInfoListManager.deleteCarInfo(t.carsInfoListManager.fetchCheckedCarInfo("excel"),"excel").then(function(){t.$message({type:"success",message:"删除成功！"}),t.emptyListCancelBatchAction("excel")}).catch(function(){t.$message({type:"error",message:"删除失败！"})})}).catch(function(){t.$message({type:"info",message:"已取消删除！"})}):this.$message({type:"info",message:"无可删除项！"})},emptyListCancelBatchAction:function(t){this.carsInfoListManager.fetchListByType(t).length||("excel"===t?this.carsInfoListManager.onCancelDialogBatchAction():this.carsInfoListManager.onCancelBatchAction())},onGenerateReceipt:function(t){var e=this;this.carsInfoListManager.checkedItemCanShouldGenerateReceipt(t)?this.$confirm("确认生成单据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.carsInfoListManager.onGenerateReceipt(e.carsInfoListManager.fetchCheckedCarInfo(),t).then(function(t){e.$message({type:"success",message:"生成成功！"}),e.$router.push("/receipt-list/"+t)}).catch(function(){e.$message({type:"error",message:"生成失败！"})})}).catch(function(){e.$message({type:"info",message:"已取消生成"})}):this.$message({type:"info",message:"无可生成项！"})}}},wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("navigate-layout",[n("template",{slot:"header"},[n("pt-title",{attrs:{type:"title",size:"4"}},[t._v(t._s(t.title))])],1),t._v(" "),t.batchAction?t._e():n("template",{slot:"middle-area"},[n("search-input",{ref:"searchInput",staticClass:"search-input",attrs:{types:["vId","eId","note"],expectedTypes:["vId","vIds"]},on:{select:t.onSelect}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),n("template",{slot:"right-area"},[t.batchAction||t.isNewDetailCarLine?t._e():[n("car-excel-importer",{staticClass:"upload-car-info",attrs:{business:t.carsInfoListManager.listBusiness},on:{importCompleted:t.onCarImported}}),t._v(" "),n("car-list-dialog",{attrs:{manager:t.carsInfoListManager,visible:t.insertDialog.show,business:t.carsInfoListManager.listBusiness,fields:t.carsInfoListManager.listFields,lines:t.insertDialog.lines,lineStatusFunction:t.carsInfoListManager.compareCarsListForExcelAndResorce,showStatus:!0,mode:"carsExcel"},on:{"update:visible":function(e){t.$set(t.insertDialog,"show",e)},dialogOk:t.confirmDialog}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onCreateCarInfo}},[t._v("创建车辆信息")])]],2),t._v(" "),n("pt-layout",{attrs:{slot:"content",fixedBlockVisible:t.isShowDetail,"fixed-block":"second","fixed-block-basis":t.isNewDetailCarLine?"100%":"33%"},slot:"content"},[n("pt-layout",{directives:[{name:"show",rawName:"v-show",value:!(t.isShowDetail&&t.isNewDetailCarLine),expression:"!(isShowDetail && isNewDetailCarLine)"}],attrs:{slot:"first",verticalMode:"",fixedBlockBasis:"50px"},slot:"first"},[n("div",{staticClass:"flex-row",attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"col grow"},[t.batchAction?[n("el-dropdown",{on:{command:t.onGenerateReceipt}},[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("\n                                生成单据\n                                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"inbound"}},[t._v("入库确认单")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"outbound"}},[t._v("出库确认单")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"import_declaration"}},[t._v("进口报关单")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"import_certificate"}},[t._v("进口证明书")])],1)],1),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:t.onBatchDelete}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{type:"default",size:"small"},on:{click:t.onCancelBatchAction}},[t._v("取消")])]:t._e(),t._v(" "),!t.batchAction&&t.carsInfoList.length?[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onBatchAction}},[t._v("批量操作")])]:t._e()],2)]),t._v(" "),n("cars-info-list",{attrs:{slot:"second",manager:t.carsInfoListManager},on:{carInfoSelect:t.onCarInfoSelect},slot:"second"})],1),t._v(" "),n("car-info-detail",{attrs:{slot:"second","car-info":t.detailCarLine,editable:!0,deletable:t.detailCarLineOriginalStatus,"is-edit":t.isDetailEdit,business:t.carsInfoListManager.detailBusiness,validator:t.carsInfoListManager.detailValidator},on:{onDetailEdit:t.onDetailEdit,onDetailCancel:t.onDetailCancel,onDetailSave:t.onDetailSave,onShowDetail:t.onShowDetail,deleteCarInfo:t.deleteCarInfo},slot:"second"})],1)],2)},staticRenderFns:[]};var St=[{path:"/carsInfoList",component:n("C7Lr")(Dt,wt,!1,function(t){n("Toax"),n("PCM8")},"data-v-cd35626e",null).exports,name:"CarsInfoList"}],Lt=n("4YfN"),Bt=n.n(Lt),Tt=n("gUGA"),Et=n.n(Tt),Rt=function(){function t(e){y()(this,t),At.call(this),this._data=e,this._id=e.uid,this._updateTime=D()(e.updateTime).format("YYYY-MM-DD"),this._status=e.status,this._title=e.title,this._type=e.type,this._typeName=e.typeName,this._summary=e.summary}return _()(t,[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"receiptCode",get:function(){return this._data.receiptCode},set:function(t){this._data.receiptCode=t}},{key:"updateTime",get:function(){return this._updateTime},set:function(t){this._updateTime=t}},{key:"status",get:function(){return this._status},set:function(t){this._status=t}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"type",get:function(){return this._type},set:function(t){this._type=t}},{key:"typeName",get:function(){return this._typeName},set:function(t){this._typeName=t}},{key:"summary",get:function(){return this._summary},set:function(t){this._summary=t}},{key:"sortNum",get:function(){var t=void 0;"confirmed"===this.status?t="1":"draft"===this.status&&(t="2");var e=D()(this._data.updateTime).format("YYYYMMDDHHmmss");return Et()(t+e,10)}}]),t}();Rt.init=function(t){return new Rt(t)};var At=function(){var t=this;this.toData=function(){return t._data}},Mt=Rt,Ot=function(){function t(e){y()(this,t),this._fileName=e,this._prepend=this._fileName.substring(0,this._fileName.indexOf(".")),this._prependParts=this._prepend.split("_"),this._append=this._fileName.substring(this._fileName.indexOf(".")),this.isSelect=!1,this.isChecked=!1,this.fileCheck=!1}return _()(t,[{key:"fileType",get:function(){return this._prependParts[0]||""}},{key:"vId",get:function(){return this._prependParts[1]||""}},{key:"receiptCode",get:function(){return this._prependParts[2]||""}},{key:"fileName",get:function(){return this._fileName}}]),t}(),Ft=function(){function t(e,n,i){y()(this,t),jt.call(this),this.name=e,this.labelName=n,this.files=i}return _()(t,[{key:"createItem",value:function(t){return new Ot(t)}},{key:"ifHasItem",value:function(t,e){return k.a.findIndex(e,function(e){return e.vId===t.vId&&e.receiptCode===t.receiptCode})>-1}},{key:"getResource",value:function(t){return z.getResourceDetail(t)}},{key:"addFileItem",value:function(t){var e=new Ot(t);return this.files.push(e),e}},{key:"removeFileItem",value:function(t,e){e.splice(e.indexOf(t),1)}}]),t}(),jt=function(){this.onFileSelect=function(t,e){k.a.each(e,function(t){t.isSelect=!1}),t.isSelect=!0}},$t=Ft,Nt=function(t){function e(t){y()(this,e);var n=at()(this,(e.__proto__||nt()(e)).call(this,t));return n.carsInfoList=t.carsInfoList,n._files=t.files||n.initFiles(),n}return ct()(e,t),_()(e,[{key:"initFiles",value:function(){return[new $t("carInfoFiles","车辆附件",[]),new $t("receiptFiles","单据附件",[])]}},{key:"initCarsAndFiles",value:function(){var t=this,e=k.a.map(this.carsInfoList,function(t){return t.car.vId}),n=k.a.map(this.files[0].files,function(t){return t.vId}),i=k.a.intersection(e,n);k.a.each(this.carsInfoList,function(e){var n=k.a.findIndex(t.files[0].files,function(t){return t.vId===e.car.vId});n>-1&&(e.car[t.type]=t.files[0].files[n].receiptCode)}),k.a.each(this.files[0].files,function(t){k.a.findIndex(i,function(e){return e===t.vId})>-1&&(t.fileCheck=!0)})}},{key:"getFieldType",value:function(t){switch(t){case"import_declaration":return"inbound-custom-receipt";case"import_certificate":return"inbound-certificate-receipt";default:return""}}},{key:"carsInfoList",get:function(){return this._carsInfoList},set:function(t){this._carsInfoList=t}},{key:"files",set:function(t){this._files=t},get:function(){return this._files}}]),e}(Mt),Vt=function(){function t(){var e,n,i,a,s,r,o=this;y()(this,t),this.onShowCarInfoDetail=function(t){o.batchAction&&t||(o.isShowCarInfoDetail=t)},this.loadReceiptList=g()(p.a.mark(function t(){var e,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.onShowCarInfoDetail(!1),t.next=3,z.queryResourceByKey("carsReceipt",{value:"receipt"});case 3:return e=t.sent,n=k.a.map(e,function(t){return o.processReceiptResource(t)}),o.receiptList=n.sort(function(t,e){return e.sortNum-t.sortNum}),t.abrupt("return",o.receiptList);case 7:case"end":return t.stop()}},t,o)})),this.loadOneReceipt=(e=g()(p.a.mark(function t(e){var n,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.getResourceDetail(e.result);case 2:return n=t.sent,i=o.processReceiptResource(n),o.receiptList=[i],t.abrupt("return",o.receiptList);case 6:case"end":return t.stop()}},t,o)})),function(t){return e.apply(this,arguments)}),this.processReceiptResource=function(t){var e=t.metadata,n=e.labels,i=k.a.find(n,function(t){return"carsReceipt"===t.key}),a=i.value.substring(i.value.lastIndexOf("/")+1),s=k.a.find(n,function(t){return"receiptCode"===t.key}),r=k.a.find(n,function(t){return"title"===t.key}),o=k.a.find(n,function(t){return"updateTime"===t.key}),c=k.a.find(n,function(t){return"type"===t.key}),l=k.a.find(n,function(t){return"typeName"===t.key}),u=k.a.find(n,function(t){return"carIds"===t.key});return Mt.init({uid:e.uid,receiptCode:s?s.value:"",status:a,title:r?r.value:"",updateTime:o?o.value:new Date,type:c?c.value:"inbound",typeName:l?l.value:"入库单",summary:u?u.value:""})},this.deleteReceipt=(n=g()(p.a.mark(function t(e){var n,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.getResourceDetail(e.id);case 2:return n=t.sent,t.next=5,z.deleteResource(e.id,n.status.operationToken);case 5:return i=t.sent,o.receiptList.splice(o.receiptList.indexOf(e),1),t.abrupt("return",i);case 8:case"end":return t.stop()}},t,o)})),function(t){return n.apply(this,arguments)}),this.loadReceiptDetail=(i=g()(p.a.mark(function t(e){var n,i,a,s,r,c,l,u,f,d;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o.onShowCarInfoDetail(!1),t.next=3,z.getResourceDetail(e);case 3:if(n=t.sent,o.operationToken=n.status.operationToken,i=o.processReceiptResource(n),!(a=i.summary?i.summary.split(","):[]).length){t.next=13;break}return t.next=10,M.fetchCars(a);case 10:t.t0=t.sent,t.next=14;break;case 13:t.t0=[];case 14:s=t.t0,r=[],t.t1=i.type,t.next="import_declaration"===t.t1?19:"import_certificate"===t.t1?21:"inbound"===t.t1?23:(t.t1,25);break;case 19:return o._business=xt.InboundCustomsDeclaration,t.abrupt("break",27);case 21:return o._business=xt.InboundCertificateReceipt,t.abrupt("break",27);case 23:return o._business=xt.Inbound,t.abrupt("break",27);case 25:return o._business=xt.Outbound,t.abrupt("break",27);case 27:o._listFields=o._business.getOrderedFieldsByOption("listOrders",1/0),k.a.each(s,function(t){r.push(o.carsFactory(t))}),r.sort(function(t,e){return t.vId<e.vId?-1:t.vId>e.vId?1:0}),c=k.a.filter(n.datas,function(t){return"text/plain"===t.contentType}),l=k.a.filter(c,function(t){return"receiptFile"!==t.name.split("_")[0]}).map(function(t){return new Ot(t.name)}),u=k.a.filter(c,function(t){return"receiptFile"===t.name.split("_")[0]}).map(function(t){return new Ot(t.name)}),f=[new $t("carInfoFiles","车辆附件",l),new $t("receiptFiles","单据附件",u)],d=new Nt(Bt()({},i.toData(),{carsInfoList:r,files:f})),o.receiptDetail=d;case 36:case"end":return t.stop()}},t,o)})),function(t){return i.apply(this,arguments)}),this.onCarInfoSelect=function(t,e){var n=o.fetchListByType(e);k.a.each(n,function(t){t.isSelect=!1}),t.isSelect=!0},this.goCarInfoDetail=function(t){o._detailCarLine=t,o._detailValidator=o._detailBusiness.createValidator(o.detailCarLine.car)},this.fetchListByType=function(t){return"dialog"===t?o.newCarsInfoList:o.carsInfoList},this.onComfirmReceipt=g()(p.a.mark(function t(){var e,n;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.queryResourceContent(o.receiptDetail.id,"carsReceipt",{verson:0});case 2:return e=t.sent,k.a.each(e,function(t){var e=k.a.find(t,function(t){return"vId"===t.key}).value,n=k.a.findIndex(o.carsInfoList,function(t){return t.car.vId===e});n>-1&&t.push({key:o.receiptDetail.type,value:o.carsInfoList[n].car.getValue(o.receiptDetail.type)})}),t.next=6,z.getResourceDetail(o.receiptDetail.id);case 6:return n=t.sent,z.putJsonResource("carsReceipt",e,o.receiptDetail.id,n.status.operationToken,!1),t.next=10,z.commitOneResouce(o.receiptDetail.id,{type:"commit"},{headers:{operationToken:n.status.operationToken}});case 10:return t.next=12,z.putLabels(o.receiptDetail.id,[{key:"carsReceipt",value:"receipt/"+o.receiptDetail.type+"/confirmed"},{key:"updateTime",value:D()().format("YYYY-MM-DD HH:mm:ss")}]);case 12:return o.receiptDetail.status="comfirmed",t.abrupt("return",o.receiptDetail.status);case 14:case"end":return t.stop()}},t,o)})),this.onSelectSearchInfo=(a=g()(p.a.mark(function t(e){var n,i,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!k.a.isArray(e.result)){t.next=8;break}return t.next=4,M.fetchCars(e.result);case 4:i=t.sent,k.a.each(i,function(t){n.push(o.carsFactory(t))}),t.next=12;break;case 8:return t.next=10,M.fetchCars([e.result]);case 10:a=t.sent,k.a.each(a,function(t){n.push(o.carsFactory(t))});case 12:return o.newCarsInfoList=[],k.a.eachRight(n,function(t){k.a.some(o.newCarsInfoList,function(e){return e.car.vId===t.car.vId})||o.newCarsInfoList.unshift(t)}),t.abrupt("return",o.newCarsInfoList);case 15:case"end":return t.stop()}},t,o)})),function(t){return a.apply(this,arguments)}),this.onBatchAction=function(){o.onShowCarInfoDetail(!1),o.batchAction=!0},this.onCancelBatchAction=function(){o.batchAction=!1,o.clearChecked()},this.onDialogBatchAction=function(){o.dialogBatchAction=!0},this.onCancelDialogBatchAction=function(){o.dialogBatchAction=!1,o.clearChecked("dialog")},this.clearChecked=function(t){var e=o.fetchListByType(t);k.a.each(e,function(t){t.isChecked=!1})},this.onGenerateReceipt=(s=g()(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.resourceStore.onGenerateReceipt(o.receiptDetail.carsInfoList,e));case 1:case"end":return t.stop()}},t,o)})),function(t){return s.apply(this,arguments)}),this.InsertCarInfosToList=g()(p.a.mark(function t(){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k.a.eachRight(o.newCarsInfoList,function(t){!k.a.some(o.carsInfoList,function(e){return e.car.vId===t.car.vId})&&("inbound"===o.receiptDetail.type&&1!=(1&t.car.status)||"inbound"!==o.receiptDetail.type&&16!=(16&t.car.status)&&1==(1&t.car.status))&&o.carsInfoList.unshift(t)}),t.abrupt("return",o.onUpdateReceiptCarInfoListResource());case 2:case"end":return t.stop()}},t,o)})),this.onUpdateReceiptCarInfoListResource=g()(p.a.mark(function t(){var e,n,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.fetchCarsInfoListIds(),n=k.a.map(e,function(t){return[{key:"vId",value:t}]}),t.next=4,z.putLabels(o.receiptDetail.id,[{key:"carIds",value:e.join(",")},{key:"updateTime",value:D()().format("YYYY-MM-DD HH:mm:ss")}]);case 4:return t.next=6,z.getResourceDetail(o.receiptDetail.id);case 6:return i=t.sent,t.abrupt("return",z.putJsonResource("carsReceipt",n,o.receiptDetail.id,i.status.operationToken));case 8:case"end":return t.stop()}},t,o)})),this.fetchCarsInfoListIds=function(){return k.a.map(o.carsInfoList,function(t){return t.car.vId})},this.deleteCarInfo=(r=g()(p.a.mark(function t(e,n){var i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.fetchListByType(n),k.a.each(e,function(t){return i.splice(i.indexOf(t),1)}),n||(o.onShowCarInfoDetail(!1),o.onUpdateReceiptCarInfoListResource()),t.abrupt("return",i);case 4:case"end":return t.stop()}},t,o)})),function(t,e){return r.apply(this,arguments)}),this.fetchCheckedCarInfo=function(t){var e=o.fetchListByType(t);return k.a.filter(e,function(t){return t.isChecked})},this.isHasShouldInbound=function(){var t=o.carsInfoList;return k.a.some(t,function(t){return 1!=(1&t.car.status)})},this.isAllShouldInbound=function(){var t=o.carsInfoList;return!k.a.some(t,function(t){return 1==(1&t.car.status)})},this.isHasShouldOutbound=function(){var t=o.carsInfoList;return k.a.some(t,function(t){return 16!=(16&t.car.status)&&1==(1&t.car.status)})},this.onSaveTitle=g()(p.a.mark(function t(){var e;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.putLabels(o.receiptDetail.id,[{key:"title",value:o.receiptDetail.title},{key:"updateTime",value:D()().format("YYYY-MM-DD HH:mm:ss")}]);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}},t,o)})),this.onShowDetail=function(t){o.onShowCarInfoDetail(t)},this.receiptList=[],this.receiptDetail=null,this.newCarsInfoList=[],this.carsInfoListfromExcel=[],this.batchAction=!1,this.dialogBatchAction=!1,this.operationToken="",this.resourceStore=new U,this._business=xt.Inbound,this._listFields=this._business.getOrderedFieldsByOption("listOrders",1/0),this._isShowCarInfoDetail=!1,this._detailBusiness=xt.CarDetail,this._detailCarLine=new x(this._detailBusiness.createCar({}),{}),this._detailValidator={}}return _()(t,[{key:"carsFactory",value:function(t){var e=this._business.createCar(t);return new x(e,{},this._business.createValidator(e))}},{key:"fileToCar",value:function(t){var e=k.a.find(this.receiptDetail.carsInfoList,function(e){return e.car.vId===t});this.onCarInfoSelect(e)}},{key:"checkedItemCanShouldGenerateReceipt",value:function(t){return this.resourceStore.checkedItemCanShouldGenerateReceipt(t,this.carsInfoList)}},{key:"deleteFile",value:function(){var t=g()(p.a.mark(function t(e){var n=this;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.a.all(k.a.map(e,function(){var t=g()(p.a.mark(function t(e){var i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.getResourceDetail(n.receiptDetail.id);case 2:return i=t.sent,t.abrupt("return",z.deleteDataName(n.receiptDetail.id,e.fileName,{refreshToken:!1},i.status.operationToken));case 4:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}())));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"compareCarsFromExcelAndCurrentLines",value:function(t){var e=this;return k.a.filter(t,function(t){return k.a.some(e.carsInfoList,function(e){return e.car.vId===t.car.vId})})}},{key:"setFileReceiptCode",value:function(t){var e,n=this;k.a.each(this.carsInfoList,function(e){var i=k.a.findIndex(t,function(t){return t.car.vId===e.car.vId});i>-1&&(e.car[n.receiptDetail.type]=t[i].car[n.receiptDetail.type])});var i=k.a.filter(t,function(t){return-1===t.status});(e=this.carsInfoList).unshift.apply(e,o()(i)),this.onUpdateReceiptCarInfoListResource()}},{key:"listFields",get:function(){return this._listFields}},{key:"listBusiness",get:function(){return this._business}},{key:"isAllChecked",get:function(){return this.receiptDetail.carsInfoList.length&&!k.a.some(this.receiptDetail.carsInfoList,function(t){return!t.isChecked})},set:function(t){k.a.each(this.receiptDetail.carsInfoList,function(e){e.isChecked=t})}},{key:"isHasChecked",get:function(){return k.a.some(this.receiptDetail.carsInfoList,function(t){return t.isChecked})}},{key:"isDialogAllChecked",get:function(){return this.newCarsInfoList.length&&!k.a.some(this.newCarsInfoList,function(t){return!t.isChecked})},set:function(t){k.a.each(this.newCarsInfoList,function(e){e.isChecked=t})}},{key:"isDialogHasChecked",get:function(){return k.a.some(this.newCarsInfoList,function(t){return t.isChecked})}},{key:"carsInfoList",get:function(){return this.receiptDetail?this.receiptDetail.carsInfoList:[]},set:function(t){this.receiptDetail&&(this.receiptDetail.carsInfoList=t)}},{key:"isShowCarInfoDetail",get:function(){return this._isShowCarInfoDetail},set:function(t){this._isShowCarInfoDetail=t}},{key:"detailBusiness",get:function(){return this._detailBusiness},set:function(t){this._detailBusiness=t}},{key:"detailCarLine",get:function(){return this._detailCarLine},set:function(t){this._detailCarLine=t}},{key:"detailValidator",get:function(){return this._detailValidator}}]),t}();Vt.instance=null,Vt.createInstance=function(){if(!Vt.instance||k.a.isEmpty(Vt.instance)){var t=new Vt;Vt.instance=t}return Vt.instance};var zt=Vt,Ut={name:"ReceiptList",data:function(){return{receiptManager:zt.instance,inboundCustomsDeclarationBusiness:xt.InboundCustomsDeclaration,inboundCertificateReceiptBusiness:xt.InboundCertificateReceipt,insertDialog:{show:!1,lines:[],remoteLines:[],mode:"carsExcel",business:{},listFields:[]},resourceStore:new U}},created:function(){this.init()},computed:{title:{get:function(){return"单据列表"}},receiptList:{get:function(){return this.receiptManager?this.receiptManager.receiptList:[]}}},methods:{init:function(){var t=this;zt.createInstance().loadReceiptList().then(function(){t.receiptManager=zt.instance})},onImported:function(t,e){var n=this;return g()(p.a.mark(function i(){var a,s,r;return p.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=k.a.map(e,function(t){return t.car.vId}),i.next=3,M.fetchCars(a);case 3:s=i.sent,r=k.a.map(s,function(e){return new x(t.createCar(e),{},{})}),k.a.each(e,function(e){if(k.a.some(r,function(t){return t.car.vId===e.car.vId})){k.a.some(r,function(t){return t.car.vId===e.car.vId&&"0"===t.car.status})&&(e.status=4);var n=t.getOption("statusValue",0);n>0&&k.a.some(r,function(t){return t.car.vId===e.car.vId&&!k.a.isEmpty(t.car.status)&&(t.car.status&n)===n})&&(e.status=3)}else e.status=2}),n.insertDialog.remoteLines=r,n.insertDialog.business=t,n.insertDialog.listFields=t.getOrderedFieldsByOption("listOrders",1/0),n.insertDialog.lines=e,n.insertDialog.show=!0;case 11:case"end":return i.stop()}},i,n)}))()},confirmDialog:function(){var t=this;return g()(p.a.mark(function e(){var n,i;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.a.filter(t.insertDialog.lines,function(t){return-2===t.status}),n=k.a.filter(t.insertDialog.remoteLines,function(t){return k.a.findIndex(n,function(e){return e.car.vId===t.car.vId})>-1}),e.next=4,t.resourceStore.onGenerateReceipt(n,t.insertDialog.business.getOption("receiptType",""));case 4:i=e.sent,t.insertDialog.show=!1,t.$router.push("/receipt-list/"+i);case 7:case"end":return e.stop()}},e,t)}))()},handleDeleteReceipt:function(t){var e=this;this.receiptManager.deleteReceipt(t).then(function(){e.$message({type:"success",message:"删除成功！"})}).catch(function(t){e.$message({type:"error",message:"删除失败，"+t})})},onSelect:function(t){this.receiptManager.loadOneReceipt(t)},goDetail:function(t){this.$router.push("/receipt-list/"+t.id)},reset:function(){this.init(),this.$refs.searchInput.text=""}}},Ht={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("navigate-layout",[n("template",{slot:"header"},[n("pt-title",{attrs:{type:"title",size:"4"}},[t._v(t._s(t.title))])],1),t._v(" "),n("template",{slot:"middle-area"},[n("search-input",{ref:"searchInput",staticClass:"search-input",attrs:{types:["vId","eId","receipt"],expectedTypes:["receipt"],mode:"receipt"},on:{select:t.onSelect}}),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.reset}},[t._v("重置")])],1),t._v(" "),n("template",{slot:"right-area"},[n("el-dropdown",[n("el-button",{attrs:{type:"primary",size:"small"}},[t._v("\n                导入单据\n                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("car-excel-importer",{attrs:{text:"导入进口报关单","button-type":"text",business:t.inboundCustomsDeclarationBusiness},on:{importCompleted:function(e){t.onImported(t.inboundCustomsDeclarationBusiness,e)}}}),t._v(" "),n("car-excel-importer",{attrs:{text:"导入进口证明书",business:t.inboundCertificateReceiptBusiness,"button-type":"text"},on:{importCompleted:function(e){t.onImported(t.inboundCertificateReceiptBusiness,e)}}})],1),t._v(" "),n("car-list-dialog",{attrs:{manager:t.receiptManager,visible:t.insertDialog.show,business:t.insertDialog.business,fields:t.insertDialog.listFields,lines:t.insertDialog.lines,mode:t.insertDialog.mode,"show-status":""},on:{"update:visible":function(e){t.$set(t.insertDialog,"show",e)},dialogOk:t.confirmDialog}})],1)],1),t._v(" "),n("div",{staticClass:"document-list",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"document-list-top"}),t._v(" "),n("div",{staticClass:"document-list-main"},[0===t.receiptList.length?n("div",{staticClass:"no-document"},[t._v("\n                暂无文档\n            ")]):t._e(),t._v(" "),t._l(t.receiptList,function(e){return n("document-list-item",{key:e.id,attrs:{item:e},on:{deleteDocument:t.handleDeleteReceipt,goDetail:t.goDetail}})})],2)])],2)},staticRenderFns:[]};var qt={name:"ReceiptDetail",data:function(){return{receiptManager:zt.instance,activeName:"cars",inboundCustomsDeclarationBusiness:xt.InboundCustomsDeclaration,inboundCertificateReceiptBusiness:xt.InboundCertificateReceipt,insertDialog:{show:!1,lines:[],mode:"carsExcel",business:{}}}},created:function(){var t=this;zt.createInstance().loadReceiptDetail(this.$route.params.id).then(function(){t.receiptManager=zt.instance,t.receiptManager.onCancelDialogBatchAction(),t.receiptManager.onCancelBatchAction()})},computed:{title:{get:function(){return"单据详情"}},showImporter:function(){return this.fileShow},detailCarLine:{get:function(){return this.receiptManager.detailCarLine}},carsInfoList:{get:function(){return this.receiptManager?this.receiptManager.carsInfoList:[]}},receiptDetail:{get:function(){return this.receiptManager?this.receiptManager.receiptDetail:{}}},fileShow:function(){return"inbound"!==this.receiptDetail.type&&"outbound"!==this.receiptDetail.type},status:{get:function(){switch(this.receiptDetail?this.receiptDetail.status:""){case"draft":return"草稿";case"confirmed":return"已确认";default:return""}}},editMode:{get:function(){switch(this.receiptDetail?this.receiptDetail.status:""){case"draft":return!0;case"confirmed":default:return!1}}},batchAction:{get:function(){return!!this.receiptManager&&this.receiptManager.batchAction}},draftStatus:{get:function(){return this.receiptDetail&&"draft"===this.receiptDetail.status}},batchButtonShow:function(){return this.draftStatus&&!this.batchAction&&this.carsInfoList.length},isShowCarInfoDetail:{get:function(){return this.receiptManager.isShowCarInfoDetail}}},methods:{onCarImported:function(t){var e=this;return g()(p.a.mark(function n(){return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.insertDialog.lines=[],n.next=3,e.compareStatus(t);case 3:e.insertDialog.lines=n.sent,e.insertDialog.mode="carsExcel",e.insertDialog.show=!0;case 6:case"end":return n.stop()}},n,e)}))()},onShowInsertDialog:function(){this.insertDialog.lines=[],this.insertDialog.mode="selectCar",this.insertDialog.show=!0},confirmDialog:function(){var t=k.a.filter(this.insertDialog.lines,function(t){return 1===t.status||-1===t.status});this.receiptManager.setFileReceiptCode(t),this.insertDialog.show=!1,this.insertDialog.lines=[],this.$message({type:"success",message:"导入成功！"})},onCarInfoSelect:function(t){this.receiptManager.onCarInfoSelect(t),this.goCarInfoDetail(t)},fileToCar:function(t){this.activeName="cars",this.receiptManager.fileToCar(t)},fileNameBind:function(t,e){return k.a.findIndex(this.receiptManager.receiptDetail.files[0].files,function(n){return n.receiptCode===e.car.getValue(t.name)&&e.car.vId===n.vId})>-1?(e.confirmCheck=!0,{icon:"el-icon-success",iconType:"success",message:"已匹配"}):(e.confirmCheck=!1,{icon:"el-icon-error",iconType:"error",message:"无匹配"})},fileCompareCar:function(t){var e=this;return k.a.findIndex(this.receiptManager.carsInfoList,function(n){return t.receiptCode===n.car.getValue(e.receiptDetail.type)&&n.car.vId===t.vId})>-1},deleteCarInfo:function(t){var e=this;this.$confirm("是否从单据中删除该车辆？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.receiptManager.deleteCarInfo([t]).then(function(){e.$message({type:"success",message:"删除成功！"}),e.emptyListCancelBatchAction()}).catch(function(){e.$message({type:"error",message:"删除失败！"})})})},cleaAllrFiles:function(t){var e=this;this.$confirm("是否从单据中删除该附件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.receiptManager.deleteFile(t.files).then(function(){t.files=[],e.$message({type:"success",message:"删除成功！"})}).catch(function(){e.$message({type:"error",message:"删除失败！"})})})},deleteFile:function(t,e){var n=this;this.$confirm("是否从单据中删除该附件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.receiptManager.deleteFile([t]).then(function(){e.removeFileItem(t,e.files),n.$message({type:"success",message:"删除成功！"}),n.emptyListCancelBatchAction()}).catch(function(){n.$message({type:"error",message:"删除失败！"})})})},onComfirmReceipt:function(){var t=this;if(this.carsInfoList.length){var e=!1;k.a.each(this.carsInfoList,function(t){!t.validator.validate()&&e&&(e=!0)}),"import_declaration"!==this.receiptDetail.type&&"import_certificate"!==this.receiptDetail.type||(e=!k.a.some(this.carsInfoList,function(t){return!t.confirmCheck})),e?0!==this.carsInfoList.length?this.$confirm("确认操作不可逆转，是否确认单据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.receiptManager.onComfirmReceipt().then(function(){t.receiptManager.loadReceiptDetail(t.receiptManager.receiptDetail.id)}).catch(function(){t.$message({type:"error",message:"确认失败"})})}).catch(function(){}):this.$message({type:"error",message:"车辆不能为空"}):this.$message({type:"error",message:"存在不匹配的车辆"})}else this.$message({type:"warning",message:"无车辆信息的单据不可确认"})},onDialogCarInfoSelect:function(t){this.receiptManager.onCarInfoSelect(t,"dialog")},deleteDialogCarInfo:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.receiptManager.deleteCarInfo([t],"dialog").then(function(){e.$message({type:"success",message:"删除成功！"}),e.emptyListCancelBatchAction("dialog")}).catch(function(){e.$message({type:"error",message:"删除失败！"})})})},onBatchAction:function(){this.receiptManager.onBatchAction()},onCancelBatchAction:function(){this.receiptManager.onCancelBatchAction()},onBatchDelete:function(){var t=this;this.receiptManager.isHasChecked?this.$confirm("是否从单据中删除所选车辆？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.receiptManager.deleteCarInfo(t.receiptManager.fetchCheckedCarInfo()).then(function(){t.$message({type:"success",message:"删除成功！"}),t.emptyListCancelBatchAction()}).catch(function(){t.$message({type:"error",message:"删除失败！"})})}):this.$message({type:"info",message:"无可删除项！"})},onDialogBatchAction:function(){this.receiptManager.onDialogBatchAction()},onCancelDialogBatchAction:function(){this.receiptManager.onCancelDialogBatchAction()},onGenerateReceipt:function(t){var e=this;this.receiptManager.checkedItemCanShouldGenerateReceipt(t)?this.$confirm("确认生成单据？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){e.receiptManager.onGenerateReceipt(t).then(function(t){e.$message({type:"success",message:"生成成功！"}),e.$router.push("/receipt-list/"+t),e.receiptManager.loadReceiptDetail(t)}).catch(function(){e.$message({type:"error",message:"生成失败！"})})}):this.$message({type:"info",message:"无可生成项！"})},onDialogBatchDelete:function(){var t=this;this.receiptManager.isDialogHasChecked?this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.receiptManager.deleteCarInfo(t.receiptManager.fetchCheckedCarInfo("dialog"),"dialog").then(function(){t.$message({type:"success",message:"删除成功！"}),t.emptyListCancelBatchAction("dialog")}).catch(function(){t.$message({type:"error",message:"删除失败！"})})}):this.$message({type:"info",message:"无可删除项！"})},emptyListCancelBatchAction:function(t){this.receiptManager.fetchListByType(t).length||("dialog"===t?this.receiptManager.onCancelDialogBatchAction():this.receiptManager.onCancelBatchAction())},onSaveTitle:function(){this.receiptManager.onSaveTitle()},onShowCarInfoDetail:function(t){this.receiptManager.onShowCarInfoDetail(t)},goCarInfoDetail:function(t){this.receiptManager.goCarInfoDetail(t),this.onShowCarInfoDetail(!0)},compareStatus:function(t){var e=this;return g()(p.a.mark(function n(){var i,a,s,r;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i=void 0,n.t0=e.receiptDetail.type,n.next="import_declaration"===n.t0?4:"import_certificate"===n.t0?6:8;break;case 4:return i=e.inboundCustomsDeclarationBusiness,n.abrupt("break",9);case 6:return i=e.inboundCertificateReceiptBusiness,n.abrupt("break",9);case 8:return n.abrupt("break",9);case 9:return a=k.a.map(t,function(t){return t.car.vId}),k.a.each(t,function(t){k.a.some(e.carsInfoList,function(e){return e.car.vId===t.car.vId})?t.status=1:t.status=-1}),n.next=13,M.fetchCars(a);case 13:return s=n.sent,r=k.a.map(s,function(t){return new x(i.createCar(t),{},{})}),k.a.each(t,function(t){if(k.a.some(r,function(e){return e.car.vId===t.car.vId})){k.a.some(r,function(e){return e.car.vId===t.car.vId&&"0"===e.car.status})&&(t.status=4);var e=i.getOption("statusValue",0);e>0&&k.a.some(r,function(n){return n.car.vId===t.car.vId&&!k.a.isEmpty(n.car.status)&&(n.car.status&e)===e})&&(t.status=3)}else t.status=2}),n.abrupt("return",t);case 17:case"end":return n.stop()}},n,e)}))()},onSelectSearchInfo:function(t){var e=this;return g()(p.a.mark(function n(){var i;return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.receiptManager.onSelectSearchInfo(t);case 2:return i=n.sent,n.next=5,e.compareStatus(i);case 5:e.insertDialog.lines=n.sent;case 6:case"end":return n.stop()}},n,e)}))()}}},Yt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.receiptManager?n("navigate-layout",[n("template",{slot:"header"},[n("pt-title",{attrs:{type:"title",size:"4"}},[t._v(t._s(t.title))])],1),t._v(" "),n("template",{slot:"right-area"},[t.draftStatus?n("el-button",{staticClass:"btn",attrs:{type:"primary",size:"mini"},on:{click:t.onComfirmReceipt}},[t._v("\n            确认单据\n        ")]):t._e(),t._v(" "),!t.draftStatus&&t.receiptDetail&&"inbound"===t.receiptDetail.type?n("el-dropdown",{staticClass:"btn",on:{command:t.onGenerateReceipt}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[t._v("\n                生成单据\n                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"outbound"}},[t._v("出库确认单")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"import_declaration"}},[t._v("进口报关单")]),t._v(" "),n("el-dropdown-item",{attrs:{command:"import_certificate"}},[t._v("进口证明书")])],1)],1):t._e()],1),t._v(" "),n("div",{staticClass:"receipt-detail",attrs:{slot:"content"},slot:"content"},[n("pt-layout",{attrs:{fixedBlockVisible:t.isShowCarInfoDetail,"fixed-block":"second","fixed-block-basis":"33%"}},[n("pt-layout",{class:t.isShowCarInfoDetail?"detail":"",attrs:{slot:"first",verticalMode:"","fixed-block-basis":"100px"},slot:"first"},[n("template",{slot:"first"},[n("pt-layout",{staticClass:"receipt-row",attrs:{"fixed-block":"second"}},[n("div",{staticClass:"left",attrs:{slot:"first"},slot:"first"},[t.draftStatus?n("el-input",{staticClass:"title-input",on:{blur:t.onSaveTitle},model:{value:t.receiptDetail.title,callback:function(e){t.$set(t.receiptDetail,"title",e)},expression:"receiptDetail.title"}}):n("pt-title",{attrs:{important:"",type:"title",size:"4"}},[t._v("\n                                "+t._s(t.receiptDetail?t.receiptDetail.title:"")+"\n                            ")])],1),t._v(" "),n("div",{staticClass:"right",attrs:{slot:"second"},slot:"second"},[n("pt-title",{attrs:{important:"",secondary:"",type:"text",size:"16"}},[t._v("\n                                "+t._s(t.status)+"\n                            ")])],1)]),t._v(" "),n("pt-layout",{staticClass:"receipt-row",attrs:{"fixed-block":"second"}},[n("template",{slot:"first"},[n("div",{staticClass:"item"},[n("pt-title",{attrs:{minor:"",type:"text",size:"14"}},[t._v("\n                                    单据类型：\n                                ")]),t._v(" "),n("pt-title",{attrs:{important:"",type:"text",size:"14"}},[t._v("\n                                    "+t._s(t.receiptDetail?t.receiptDetail.typeName:"")+"\n                                ")])],1),t._v(" "),n("div",{staticClass:"item"},[n("pt-title",{attrs:{minor:"",type:"text",size:"14"}},[t._v("\n                                    更新时间：\n                                ")]),t._v(" "),n("pt-title",{attrs:{important:"",type:"text",size:"14"}},[t._v("\n                                    "+t._s(t.receiptDetail?t.receiptDetail.updateTime:"")+"\n                                ")])],1),t._v(" "),n("div",{staticClass:"item"},[n("pt-title",{attrs:{minor:"",type:"text",size:"14"}},[t._v("\n                                    单据编号：\n                                ")]),t._v(" "),n("pt-title",{attrs:{important:"",type:"text",size:"14"}},[t._v("\n                                    "+t._s(t.receiptDetail?t.receiptDetail.receiptCode:"")+"\n                                ")])],1)])],2)],1),t._v(" "),n("el-tabs",{attrs:{slot:"second"},slot:"second",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{staticClass:"tab-pane",attrs:{label:"车辆信息",name:"cars"}},[n("pt-layout",{staticClass:"tab-pan-list",attrs:{verticalMode:"","fixed-block-basis":"50px"}},[t.draftStatus&&"cars"===t.activeName?n("div",{staticClass:"flex-row receip-button-list",attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"col grow"},[t.batchButtonShow?[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onBatchAction}},[t._v("批量操作")])]:t._e(),t._v(" "),t.draftStatus&&t.batchAction?[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:t.onBatchDelete}},[t._v("删除")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onCancelBatchAction}},[t._v("取消")])]:t._e()],2),t._v(" "),n("div",{staticClass:"col right"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onShowInsertDialog}},[t._v("添加车辆")]),t._v(" "),t.showImporter?n("car-excel-importer",{staticClass:"excel-button",attrs:{business:t.receiptManager.listBusiness},on:{importCompleted:t.onCarImported}}):t._e()],1)]):t._e(),t._v(" "),t.receiptManager?n("cars-info-list",{staticClass:"car-info-list",attrs:{slot:"second",manager:t.receiptManager,editMode:t.editMode,fileNameBind:t.fileNameBind,mode:"dialog"},on:{carInfoSelect:t.onCarInfoSelect,deleteCarInfo:t.deleteCarInfo},slot:"second"}):t._e()],1)],1),t._v(" "),t.receiptManager&&t.receiptManager.receiptDetail&&t.fileShow?t._l(t.receiptManager.receiptDetail.files,function(e){return n("el-tab-pane",{key:e.name,staticClass:"tab-pane",attrs:{label:e.labelName,name:e.name}},[n("file-list",{attrs:{"file-list":e,"receipt-detail":t.receiptManager.receiptDetail,manager:t.receiptManager,"file-compare-car":t.fileCompareCar,"receipt-status":t.draftStatus},on:{deleteFile:t.deleteFile,fileToCar:t.fileToCar,cleaAllrFiles:t.cleaAllrFiles}})],1)}):t._e()],2)],2),t._v(" "),n("car-info-detail",{attrs:{slot:"second","car-info":t.detailCarLine,deletable:t.editMode,business:t.receiptManager.detailBusiness,validator:t.receiptManager.detailValidator},on:{onShowDetail:t.onShowCarInfoDetail,deleteCarInfo:t.deleteCarInfo},slot:"second"})],1),t._v(" "),n("car-list-dialog",{attrs:{manager:t.receiptManager,visible:t.insertDialog.show,business:t.receiptManager.listBusiness,fields:t.receiptManager.listFields,lines:t.insertDialog.lines,mode:t.insertDialog.mode,"show-status":""},on:{"update:visible":function(e){t.$set(t.insertDialog,"show",e)},dialogOk:t.confirmDialog,onSelectSearchInfo:t.onSelectSearchInfo}})],1)],2):t._e()},staticRenderFns:[]};var Pt=[{path:"/receipt-list",component:n("C7Lr")(Ut,Ht,!1,function(t){n("AjEd")},"data-v-56c01b65",null).exports,name:"ReceiptList"},{path:"/receipt-list/:id",component:n("C7Lr")(qt,Yt,!1,function(t){n("3aoI"),n("vF4z")},"data-v-1d9107ef",null).exports,name:"ReceiptDetail"}];function Wt(t){for(var e="",n=t;n>0;){var i=n%26;0===i&&(i=26),e=String.fromCharCode(i+64)+e,n=(n-i)/26}return e}function Kt(t,e){return Wt(function(t){if(k.a.isEmpty(t))return 0;for(var e=0,n=1,i=t.toUpperCase(),a=i.length-1;a>=0;a--){var s=i[a];if(s<"A"||s>"Z")return 0;e+=(i.charCodeAt(a)-64)*n,n*=26}return e}(t)+e)}var Gt=function(){function t(e){y()(this,t),this._value=e.value,this._col=/([A-Z]+)/.exec(e.address)[0],this._row=parseInt(/(\d+)/.exec(e.address)[0],10)}return _()(t,[{key:"isEmptyValue",value:function(){return k.a.isEmpty(this.value)}},{key:"address",get:function(){return this.col+this.row}},{key:"col",get:function(){return this._col}},{key:"row",get:function(){return this._row}},{key:"value",get:function(){return this._value},set:function(t){this._value=t}}]),t}(),Jt=function(){function t(e){var n=this;y()(this,t),this._name=e.name,this._cells=k.a.map(e.values,function(t){return new Gt(t)}),k.a.each(this._cells,function(t){return n[t.address]=t})}return _()(t,[{key:"isEmpty",value:function(){return k.a.every(this.cells,function(t){return t.isEmptyValue()})}},{key:"getTitleColumns",value:function(){for(var t=k.a.find(this.cells,function(t){return!t.isEmpty}),e=t.row,n=[];t&&e===t.row;)k.a.isEmpty(t.value)||n.push(t),t=this[Kt(t.col,1)+e];return n}},{key:"getCell",value:function(t,e){var n=t;/^\d+$/.test(n)&&(n=Wt(n));var i=this[n+e];return i||(i=new Gt({address:n+e,value:""})),i}},{key:"getMaxRows",value:function(){return k.a.last(this.cells).row}},{key:"getRowAsObject",value:function(t){var e=this,n=this.getTitleColumns(),i={};return k.a.each(n,function(a){return i[a.value]=e.getCell(a.col,n[0].row+t)}),i}},{key:"name",get:function(){return this._name}},{key:"cells",get:function(){return this._cells}}]),t}(),Zt=function(){function t(e){y()(this,t),this._sheets=k.a.map(e.sheets,function(t){return new Jt(t)})}return _()(t,[{key:"sheets",get:function(){return this._sheets}},{key:"defaultSheet",get:function(){return k.a.find(this.sheets,function(t){return!t.isEmpty()})}}]),t}(),Xt=function(t){return new Zt(t)},Qt={data:function(){return{text:"",excel:{}}},created:function(){},methods:{},watch:{text:function(t){this.excel=Xt(JSON.parse(t)),this.carModelFactory()}}},te={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{flex:"auto"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},placeholder:"输入json"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)},staticRenderFns:[]},ee={methods:{onSelect:function(t){this.$message(F()(t))}}},ne={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{flex:"auto"}},[e("search-input",{attrs:{types:["vId","note"],expectedTypes:["vId","vIds"]},on:{select:this.onSelect}})],1)},staticRenderFns:[]},ie=[{path:"/excelTest",component:n("C7Lr")(Qt,te,!1,null,null,null).exports,name:"ExcelTest"},{path:"/searchTest",component:n("C7Lr")(ee,ne,!1,null,null,null).exports,name:"SearchTest"}];i.default.use(c.a);var ae=[].concat(o()(St),o()(Pt),o()(ie)),se=new c.a({routes:[{path:"/",redirect:"/carsInfoList",component:u,children:ae}]}),re=n("H93t"),oe=n.n(re),ce=(n("TsY+"),{name:"PtTitle",props:{size:{type:String,default:""},type:{type:String,default:""},format:{type:String,default:""},important:{type:Boolean,default:!1},minor:{type:Boolean,default:!1},positive:{type:Boolean,default:!1},negative:{type:Boolean,default:!1},secondary:{type:Boolean,deafult:!1},leftGap:{type:[String,Number],default:0},ignore:{type:Boolean,deafult:!1},justifyContent:{type:String,default:"flex-start"}},computed:{content:function(){var t=["pt-title"];if(this.size.length>0)switch(this.type){case"text":t.push("text-part-"+this.size);break;case"title":t.push("pt-h"+this.size)}return this.format.length>0&&t.push("format-"+this.format),this.minor?t.push("minor"):this.important&&t.push("important"),this.negative?t.push("negative"):this.positive?t.push("positive"):this.secondary?t.push("secondary"):this.ignore&&t.push("ignore"),this.leftGap>0&&t.push("gap-"+this.leftGap),t},style:function(){return{"justify-content":this.justifyContent}}}}),le={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:this.content,style:this.style},[e("div",{staticClass:"wrapper"},[this._t("default")],2)])},staticRenderFns:[]};var ue=n("C7Lr")(ce,le,!1,function(t){n("UO+K")},"data-v-df97ee2a",null).exports,fe={name:"PtLayout",props:{verticalMode:{type:Boolean,default:!1},fixedBlock:{type:String,default:"first"},fixedBlockBasis:{type:String,default:""},firstBlockClass:{type:[Object,Array,String],default:K()},secondBlockClass:{type:[Object,Array,String],default:K()},growBlockScroll:{type:Boolean,default:!1},fixedBlockPadding:{type:String,default:"0px"},growBlockPadding:{type:String,default:"0px"},fixedBlockVisible:{type:Boolean,default:!0}},computed:{firstClasses:{get:function(){return this.getClasses("first")}},secondClasses:{get:function(){return this.getClasses("second")}},firstStyles:{get:function(){return this.getStyles("first")}},secondStyles:{get:function(){return this.getStyles("second")}},firstVisible:{get:function(){return"first"!==this.fixedBlock||this.fixedBlockVisible}},secondVisible:{get:function(){return"second"!==this.fixedBlock||this.fixedBlockVisible}}},methods:{getClasses:function(t){return k.a.isEmpty(this.firstBlockClass)?t:G(this.firstBlockClass,t)},getStyles:function(t){var e={};if(this.fixedBlock===t){if(e["flex-grow"]="0",k.a.isEmpty(this.firstBlockClass)&&!k.a.isEmpty(this.fixedBlockBasis)){var n=k.a.isEmpty(this.fixedBlockBasis)?"auto":this.fixedBlockBasis;e.flex="0 0 "+n}}else e.flex="1 1 auto",e["min-height"]="0";return e["flex-direction"]=this.verticalMode?"column":"row",this.fixedBlock!==t?(e.padding=this.growBlockPadding,this.growBlockScroll&&(this.verticalMode?e["overflow-y"]="scroll":e["overflow-x"]="scroll")):e.padding=this.fixedBlockPadding,e}}},de={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{layout:!0,vertical:t.verticalMode}},[t.firstVisible?n("div",{class:t.firstClasses,style:t.firstStyles},[t._t("first")],2):t._e(),t._v(" "),t.secondVisible?n("div",{class:t.secondClasses,style:t.secondStyles},[t._t("second")],2):t._e()])},staticRenderFns:[]};var he=n("C7Lr")(fe,de,!1,function(t){n("vIqV")},null,null).exports,pe={name:"GridCell",props:{flexWidth:{type:[Number,String],default:"1"},minWidth:{type:[Number,String],default:""},maxWidth:{type:[Number,String],default:""},deleted:{type:Boolean,default:!1},justifyContent:{type:String,default:"flex-start"}},computed:{style:function(){var t={};return this.flexWidth&&(t.flex=this.flexWidth),this.minWidth&&(t.minWidth=this.minWidth),this.maxWidth&&(t.maxWidth=this.maxWidth),this.justifyContent&&(t.justifyContent=this.justifyContent),t}}},me={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"GridCell",style:this.style},[this._t("default"),this._v(" "),this.deleted?e("div",{class:{"hr-show":this.deleted}}):this._e()],2)},staticRenderFns:[]};var ge=n("C7Lr")(pe,me,!1,function(t){n("XqVO")},"data-v-6dcadf26",null).exports,ve={name:"GridRow",props:{selected:{type:Boolean,default:!1},flexWidth:{type:[Number,String],default:"1"}}},ye={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"GridRow",style:{flex:this.flexWidth}},[this._t("default")],2)},staticRenderFns:[]};var Ce=n("C7Lr")(ve,ye,!1,function(t){n("NM7Y")},"data-v-f657d95a",null).exports,_e={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"GridHeadRow"},[this._t("default")],2)},staticRenderFns:[]};var Ie=n("C7Lr")({name:"GridHeadRow"},_e,!1,function(t){n("0+j+")},"data-v-a9547bce",null).exports,ke={name:"GridHeadColumn",props:{flexWidth:{type:[Number,String],default:"1"},textAlign:{type:String,default:""},minWidth:{type:[Number,String],default:""}}},xe={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"grid-head-column",style:{flex:this.flexWidth,"min-width":this.minWidth}},[e("div",{staticClass:"static",style:{"text-align":this.textAlign}},[this._t("default")],2)])},staticRenderFns:[]};var be=n("C7Lr")(ke,xe,!1,function(t){n("BHn2")},"data-v-72616882",null).exports,De={name:"SearchInput",props:{types:{type:Array,required:!0},expectedTypes:{type:Array,required:!0},minLength:{type:Number,default:3},mode:{type:String,default:"cars"}},data:function(){return{text:""}},computed:{carMode:function(){return"cars"===this.mode},receiptModel:function(){return"receipt"===this.mode}},methods:{hasType:function(t){return k.a.some(this.types,function(e){return e===t})},onSearch:function(t,e){var n=t.trim();if(n.length<this.minLength)e([]);else{var i=this.expectedTypes.join(","),a=this.types.join(",");M.getCarsAndReceiptList(n,i,a).then(function(t){return e(t)})}},onSelect:function(t){this.$emit("select",t)}}},we={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-autocomplete",{attrs:{"fetch-suggestions":t.onSearch,placeholder:"输入搜索关键字（至少三位字符）","value-key":"keyword"},on:{select:t.onSelect},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.item;return["vId"==i.type&&"vId"==i.returnType?n("search-item-vid-vid",{attrs:{item:i,keyword:t.text}}):"eId"==i.type&&"vId"==i.returnType?n("search-item-eid-vid",{attrs:{item:i,keyword:t.text}}):"note"===i.type&&"vIds"==i.returnType?n("search-item-note-vids",{attrs:{item:i,keyword:t.text}}):"receipt"===i.type&&"vIds"===i.returnType?n("search-item-receiptid-title-vids",{attrs:{item:i,keyword:t.text}}):t._e(),t._v(" "),"receipt"===i.returnType||"outbound"===i.returnType||"inbound"===i.returnType?n("search-item-vid-eid-title-receiptid-receiptid",{attrs:{item:i,keyword:t.text}}):t._e()]}}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})},staticRenderFns:[]};var Se=n("C7Lr")(De,we,!1,function(t){n("yL6t")},"data-v-63d5dee8",null).exports,Le={name:"searchItemNoteVids",props:{item:{type:Object,required:!0},keyword:{type:String,required:!0}},computed:{highlights:function(){return Z(this.item.keyword,this.keyword)}}},Be={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-item"},[n("div",{staticClass:"items"},[n("div",{staticClass:"item"},[n("pt-title",[t._v(t._s(t.highlights[0]))]),t._v(" "),n("pt-title",{attrs:{important:""}},[t._v(t._s(t.highlights[1]))]),t._v(" "),n("pt-title",[t._v(t._s(t.highlights[2]))])],1),t._v(" "),n("div",{staticClass:"item"},[n("pt-title",{attrs:{minor:""}},[t._v("共"+t._s(t.item.result.length)+"辆车")])],1)])])},staticRenderFns:[]};var Te=n("C7Lr")(Le,Be,!1,function(t){n("wfi3")},"data-v-0050da40",null).exports,Ee={name:"searchItemVidVid",props:{item:{type:Object,required:!0},keyword:{type:String,required:!0}},computed:{highlights:function(){return Z(this.item.keyword,this.keyword)}}},Re={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-item"},[n("pt-title",[t._v(t._s(t.highlights[0]))]),t._v(" "),n("pt-title",{attrs:{important:""}},[t._v(t._s(t.highlights[1]))]),t._v(" "),n("pt-title",[t._v(t._s(t.highlights[2]))])],1)},staticRenderFns:[]},Ae=n("C7Lr")(Ee,Re,!1,null,null,null).exports,Me={name:"searchItemEidVid",props:{item:{type:Object,required:!0},keyword:{type:String,required:!0}},computed:{highlights:function(){return Z(this.item.keyword,this.keyword)}}},Oe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-item"},[n("pt-title",[t._v(t._s(t.highlights[0]))]),t._v(" "),n("pt-title",{attrs:{important:""}},[t._v(t._s(t.highlights[1]))]),t._v(" "),n("pt-title",[t._v(t._s(t.highlights[2]))])],1)},staticRenderFns:[]},Fe=n("C7Lr")(Me,Oe,!1,null,null,null).exports,je={name:"NavigateLayout",props:{functionAreaFlexStyle:{type:String,default:"0 0 200px"},title:{type:String,default:""}},methods:{handleRouterBack:function(){this.$router.back()}}},$e={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pt-layout",{attrs:{"fixed-block-basis":"60px",verticalMode:"","grow-block-padding":"10px"}},[n("div",{staticClass:"flex-row gutter-sm header",attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"col navigation",on:{click:t.handleRouterBack}},[n("el-button",{staticClass:"navigation-back-arrow",attrs:{type:"text"}},[n("i",{staticClass:"fa fa-arrow-left"})])],1),t._v(" "),n("div",{staticClass:"col"},[t._t("header",[n("pt-title",{attrs:{type:"title",size:"4"}},[t._v(t._s(t.title))])])],2),t._v(" "),n("div",{staticClass:"col grow middle"},[t._t("middle-area")],2),t._v(" "),n("div",{staticClass:"col right",style:{flex:t.functionAreaFlexStyle}},[t._t("right-area")],2)]),t._v(" "),t._t("content",null,{slot:"second"})],2)},staticRenderFns:[]};var Ne=n("C7Lr")(je,$e,!1,function(t){n("9MDj")},"data-v-30931488",null).exports,Ve={name:"searchItemReceiptidTitleVids",props:{item:{type:Object,required:!0},keyword:{type:String,required:!0}},computed:{highlights:function(){return Z(this.item.keyword,this.keyword)}}},ze={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-item"},[n("div",{staticClass:"items"},[n("div",{staticClass:"item"},[n("pt-title",[t._v(t._s(t.highlights[0]))]),t._v(" "),n("pt-title",{attrs:{important:""}},[t._v(t._s(t.highlights[1]))]),t._v(" "),n("pt-title",[t._v(t._s(t.highlights[2]))])],1),t._v(" "),n("div",{staticClass:"item"},[n("pt-title",{attrs:{minor:""}},[t._v("共"+t._s(t.item.result.length)+"辆车")])],1)])])},staticRenderFns:[]};var Ue=n("C7Lr")(Ve,ze,!1,function(t){n("Qbzi")},"data-v-32c9a281",null).exports,He={name:"searchItemVidEidTitleReceiptidReceiptid",props:{item:{type:Object,required:!0},keyword:{type:String,required:!0}},computed:{highlights:function(){return Z(this.item.keyword,this.keyword)},typeName:{get:function(){switch(this.item.returnType){case"inbound":return"入库单";case"outbound":return"出库单";default:return"未知单据类型"}}}}},qe={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-item"},[n("pt-title",[t._v("包含")]),t._v(" "),n("pt-title",{attrs:{"left-gap":"2"}},[t._v(t._s(t.highlights[0]))]),t._v(" "),n("pt-title",{attrs:{important:""}},[t._v(t._s(t.highlights[1]))]),t._v(" "),n("pt-title",[t._v(t._s(t.highlights[2]))]),t._v(" "),n("pt-title",{attrs:{"left-gap":"2"}},[t._v("的"+t._s(t.typeName))])],1)},staticRenderFns:[]},Ye=n("C7Lr")(He,qe,!1,null,null,null).exports,Pe={name:"PtitTooltipContainer",props:{iconClasses:{type:[Object,String],default:function(){}},tooltip:{type:String,default:null},placement:{type:String,default:"bottom-end"},color:{type:String,default:"black"},effect:{type:String,default:"dark"},hOffset:{type:Number,default:0},vOffset:{type:Number,default:0}},data:function(){return{iconOffset:"auto"}},computed:{showTooltip:function(){return!P.a.isEmpty(this.tooltip)},tooltipIconClasses:function(){return this.concatClass("tooltip-icon",this.iconClasses)},iconRightOffset:function(){return P.a.isNumber(this.iconOffset)?this.iconOffset+this.hOffset+"px":"auto"},iconTopOffset:function(){return P.a.isNumber(this.iconOffset)?this.iconOffset+this.vOffset+"px":"auto"}},methods:{setIconPosition:function(){if("auto"===this.iconOffset){var t=this.$el.offsetHeight,e=this.$refs.icon.offsetHeight;this.iconOffset=(t-e)/2}},concatClass:function(t,e){return t&&t.indexOf(e)>-1?t:t?e?t+" "+e:t:e||""}},mounted:function(){this.showTooltip&&(this.$emit("on"),this.setIconPosition())},watch:{showTooltip:function(t){var e=this;t?(this.$emit("on"),this.$nextTick(function(){return e.setIconPosition()})):this.$emit("off")}}},We={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ptit-tooltip-container"},[t._t("default"),t._v(" "),n("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:t.showTooltip,expression:"showTooltip"}],ref:"tooltip",attrs:{effect:t.effect,"visible-arrow":!1,content:t.tooltip,placement:t.placement}},[n("i",{ref:"icon",class:t.tooltipIconClasses,style:{right:t.iconRightOffset,top:t.iconTopOffset,color:t.color}})])],2)},staticRenderFns:[]};var Ke=n("C7Lr")(Pe,We,!1,function(t){n("hzVx")},null,null).exports,Ge={name:"PtInput",props:{tooltipColor:{type:String,default:"red"},showInputBorder:{type:Boolean,default:!0},tooltip:{type:String,default:null},iconClasses:{type:String,default:"fa fa-warning"},value:{type:[String,Number,Date]},tooltipEffect:{type:String,default:"red"},validate:{type:[Function,Object],default:P.a.noop()},width:{type:String,default:"auto"},inputType:{type:String,default:"input"}},data:function(){return{currentValue:this.value}},methods:{getInputNode:function(){var t=this.$refs.elInput;return P.a.isEmpty(t)?null:(this.suggestionMode||this.isNumber?t=t.$refs.input:this.isDatePicker?t=t.$refs.reference:this.isSelect&&(t=t.$refs.reference),t.$refs.input)},setInputBorderColor:function(t){if(this.showInputBorder){var e=this.getInputNode();P.a.isEmpty(e)||(e.style.borderColor=t)}},onShowTooltip:function(){this.setInputBorderColor(this.tooltipColor)},onOffTooltip:function(){this.setInputBorderColor("")},onBlur:function(t){P.a.isFunction(this.validate)&&this.validate(this.currentValue),this.$emit("blur",t),this.isSelect&&this.$emit("change",t)},onSelectVisibleChange:function(t){t||this.doValidate()},doValidate:function(){P.a.isFunction(this.validate)?this.validate(this.currentValue):P.a.isObject(this.validate)&&P.a.isFunction(this.validate.validate)&&this.validate.validate(this.currentValue)}},computed:{suggestionMode:function(){return P.a.has(this.$attrs,"fetch-suggestions")},isInput:function(){return"input"===this.inputType},isNumber:function(){return"number"===this.inputType},isDatePicker:function(){return"date"===this.inputType},isSelect:function(){return"select"===this.inputType},iconHOffset:function(){return this.isDatePicker||this.isSelect?10:0},closeIcon:{get:function(){return this.currentValue?"close":""}}},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t),this.doValidate()}}},Je={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ptit-tooltip-container",{style:{width:t.width},attrs:{tooltip:t.tooltip,effect:t.tooltipEffect,iconClasses:t.iconClasses,color:t.tooltipColor,hOffset:t.iconHOffset},on:{on:t.onShowTooltip,off:t.onOffTooltip}},[t.isInput&&t.suggestionMode?n("el-autocomplete",t._g(t._b({ref:"elInput",attrs:{icon:t.closeIcon,"on-icon-click":t.handleCloseIconClick},on:{change:t.onBlur},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-autocomplete",t.$attrs,!1),t.$listeners)):t.isDatePicker?n("el-date-picker",t._b({ref:"elInput",on:{change:t.onBlur},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-date-picker",t.$attrs,!1)):t.isNumber?n("el-input-number",t._b({ref:"elInput",attrs:{debounce:1e3},on:{change:t.onBlur},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-input-number",t.$attrs,!1)):t.isSelect?n("el-select",t._b({ref:"elInput",on:{change:t.onBlur,"visible-change":t.onSelectVisibleChange},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-select",t.$attrs,!1),[t._t("default")],2):n("el-input",t._g(t._b({ref:"elInput",on:{blur:t.onBlur,change:t.onBlur},model:{value:t.currentValue,callback:function(e){t.currentValue=e},expression:"currentValue"}},"el-input",t.$attrs,!1),t.$listeners))],1)},staticRenderFns:[]};var Ze=n("C7Lr")(Ge,Je,!1,function(t){n("SFD1")},null,null).exports,Xe={install:function(t){t.component(ue.name,ue),t.component(he.name,he),t.component(ge.name,ge),t.component(Ce.name,Ce),t.component(Ie.name,Ie),t.component(be.name,be),t.component(Se.name,Se),t.component(Te.name,Te),t.component(Ae.name,Ae),t.component(Fe.name,Fe),t.component(Ne.name,Ne),t.component(Ue.name,Ue),t.component(Ye.name,Ye),t.component(Ke.name,Ke),t.component(Ze.name,Ze)}},Qe=[{index:"1",title:"车辆信息",children:[{index:"1-1",title:"车辆信息",path:"/carsInfoList"},{index:"1-2",title:"单据列表",path:"/receipt-list"}]},{index:"2",title:"测试",children:[{index:"2-1",title:"Excel解析测试",path:"/excelTest"},{index:"2-2",title:"搜索组件测试",path:"/searchTest"}]}],tn={name:"LayoutMenu",data:function(){return{leftMenuConfig:Qe,isCollapse:!0}},computed:{defaultActive:{get:function(){var t=this.$route.path;return t.includes("/carsInfoList")?"1-1":t.includes("/receipt-list")?"1-2":"1-1"}}}},en={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-menu"},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.defaultActive,router:""}},[t._l(t.leftMenuConfig,function(e){return[n("el-submenu",{key:e.index,attrs:{index:e.index}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),t._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]),t._v(" "),t._l(e.children,function(e){return[n("el-menu-item",{key:e.index,attrs:{index:e.index,route:{path:e.path}}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])]})],2)]})],2)],1)},staticRenderFns:[]};var nn=n("C7Lr")(tn,en,!1,function(t){n("shd+")},"data-v-5faa5efc",null).exports,an={install:function(t){t.component(nn.name,nn)}},sn={name:"cars-info-list",props:{manager:{type:Object},editMode:{type:Boolean,required:!1,default:!1},fileNameBind:{type:Function}},data:function(){return{}},computed:{business:function(){return this.manager.listBusiness},isAllChecked:{get:function(){return this.manager.isAllChecked},set:function(t){this.manager.isAllChecked=t}},isHasChecked:{get:function(){return this.manager.isHasChecked}},batchAction:{get:function(){return this.manager.batchAction}},carInfoMode:{get:function(){return"CarsInfoList"===this.$route.name}}},methods:{carInfoSelect:function(t){this.$emit("carInfoSelect",t)},goToDetail:function(t){this.$router.push("/receipt-list/"+t)}}},rn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pt-layout",{attrs:{fixedBlockBasis:"auto",verticalMode:"","grow-block-scroll":!0}},[n("div",{staticClass:"content-top",attrs:{slot:"first"},slot:"first"},[n("grid-head-row",[t.batchAction?n("grid-head-column",{attrs:{flexWidth:"0 0 30px",textAlign:"center"}},[n("el-checkbox",{attrs:{indeterminate:t.isHasChecked&&!t.isAllChecked},model:{value:t.isAllChecked,callback:function(e){t.isAllChecked=e},expression:"isAllChecked"}})],1):t._e(),t._v(" "),t._l(t.manager.listFields,function(e){return t.business.isHiddenField(e.name)?t._e():n("grid-head-column",{key:e.name,attrs:{flexWidth:e.getOption("contentWidth","0 0 auto"),textAlign:e.getOption("contentAlign","center")}},[t._v("\n                "+t._s(e.label)+"\n            ")])}),t._v(" "),n("grid-head-column",{attrs:{flexWidth:"0 0 80px",textAlign:"right"}})],2)],1),t._v(" "),n("div",{attrs:{slot:"second"},slot:"second"},[t._l(t.manager.carsInfoList,function(e){return[n("cars-info-list-item",{key:e.car.vId,attrs:{business:t.business,fields:t.manager.listFields,item:e,"batch-action":t.batchAction,editMode:t.editMode,mode:"list",fileNameBind:t.fileNameBind},on:{carInfoSelect:t.carInfoSelect,goToDetail:t.goToDetail}})]}),t._v(" "),0===t.manager.carsInfoList.length?n("p",{staticClass:"content-p"},[t._v("\n            暂无数据\n        ")]):t._e()],2)])},staticRenderFns:[]};var on=n("C7Lr")(sn,rn,!1,function(t){n("OdHO")},"data-v-70e0ace5",null).exports,cn={name:"cars-info-list-item",props:{fields:{type:Array,required:!0},item:{type:Object},mode:{type:String},batchAction:{type:Boolean,required:!1,default:!1},business:{type:Object,required:!0},editMode:{type:Boolean,required:!1,default:!1},fileNameBind:{type:Function},compareCars:{type:Function}},computed:{carInfoListItemClass:{get:function(){return{"cars-info-list-item":!0,"cars-info-list-item-select":this.item.isSelect}}},inboundParts:function(){return k.a.isEmpty(this.item.car.inbound)?["",""]:this.item.car.inbound.split(",")},outboundParts:function(){return k.a.isEmpty(this.item.car.outbound)?["",""]:this.item.car.outbound.split(",")},listMode:{get:function(){return"list"===this.mode}},dialogMode:{get:function(){return"dialog"===this.mode}},carInfoMode:{get:function(){return"CarsInfoList"===this.$route.name}},originalStatus:{get:function(){return""+this.item.car.status=="0"}}},methods:{onIconClick:function(t,e){"inbound-status"===e.name&&this.getStatus(1)?this.goToDetail(this.inboundParts[1]):"outbound-status"===e.name&&this.getStatus(16)&&this.goToDetail(this.outboundParts[1])},getStatus:function(t){var e=[];return 16==(16&this.item.car.status)&&e.push(16),1==(1&this.item.car.status)&&e.push(1),0===e.length&&e.push(0),k.a.findIndex(e,function(e){return e===t})>-1},carInfoSelect:function(){this.$emit("carInfoSelect",this.item)},goToDetail:function(t){this.$emit("goToDetail",t)}}},ln={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.carInfoListItemClass,on:{click:t.carInfoSelect}},[n("grid-row",[t.batchAction?n("grid-cell",{attrs:{flexWidth:"0 0 30px","justify-content":"center"}},[[n("div",{on:{click:function(t){t.stopPropagation()}}},[n("el-checkbox",{model:{value:t.item.isChecked,callback:function(e){t.$set(t.item,"isChecked",e)},expression:"item.isChecked"}})],1)]],2):t._e(),t._v(" "),t._l(t.fields,function(e){return t.business.isHiddenField(e.name,t.item.car)?t._e():n("grid-cell",{key:e.name,attrs:{flexWidth:e.getOption("contentWidth","0 0 auto"),"justify-content":e.getOption("contentAlign","center")}},[[n("car-field-value",{attrs:{item:t.item,field:e,editMode:t.editMode&&t.business.isEditableField(e.name,t.item.car),"fetch-suffix-icon":t.fileNameBind},on:{iconClick:t.onIconClick}})]],2)}),t._v(" "),t._t("line-suffix")],2)],1)},staticRenderFns:[]};var un=n("C7Lr")(cn,ln,!1,function(t){n("ZRue")},"data-v-50c438ac",null).exports,fn={name:"CarInfoDetail",props:{carInfo:{type:Object,required:!0},business:{type:Object,required:!0},validator:{type:Object,required:!0},editable:{type:Boolean,required:!1,default:!1},isEdit:{type:Boolean,required:!1,default:!1},deletable:{type:Boolean,required:!1,default:!1}},computed:{groups:{get:function(){return this.business.getGroupFieldsByOption("groupName","其它")}}},methods:{onValueClick:function(t,e){"CSV"===e.fieldType&&this.$router.push("/receipt-list/"+k.a.last(t.getValue(e.name).split(",")))},isGroupHasNotHiddenField:function(t){var e=this;return k.a.some(t,function(t){return!e.business.isHiddenField(t.name,e.carInfo.car)})},onDetailEdit:function(){this.$emit("onDetailEdit")},onDetailCancel:function(){this.$emit("onDetailCancel")},onDetailSave:function(){this.$emit("onDetailSave")},onShowDetail:function(t){this.$emit("onShowDetail",t)},deleteCarInfo:function(){this.$emit("deleteCarInfo",this.carInfo)}}},dn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pt-layout",{staticClass:"car-info-detail-container",attrs:{verticalMode:"",fixedBlockBasis:"50px"}},[n("div",{staticClass:"flex-row",attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"col grow"},[n("pt-layout",{attrs:{"fixed-block":"second"}},[n("template",{slot:"first"},[t.isEdit?t._e():[t.editable?n("el-button",{attrs:{type:"primary"},on:{click:t.onDetailEdit}},[t._v("编辑")]):t._e(),t._v(" "),t.deletable?n("el-button",{attrs:{type:"danger"},on:{click:t.deleteCarInfo}},[t._v("\n                            删除\n                        ")]):t._e()],t._v(" "),t.isEdit?[n("el-button",{attrs:{type:"default"},on:{click:t.onDetailCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onDetailSave}},[t._v("保存")])]:t._e()],2),t._v(" "),n("template",{slot:"second"},[t.isEdit?t._e():[n("div",{staticClass:"close-detail-icon",on:{click:function(e){t.onShowDetail(!1)}}},[n("i",{staticClass:"el-icon-close"})])]],2)],2)],1)]),t._v(" "),n("div",{staticClass:"car-info-detail",attrs:{slot:"second"},slot:"second"},t._l(t.groups,function(e,i){return t.isGroupHasNotHiddenField(e)?n("div",{key:i,staticClass:"key-value-container"},[n("div",{staticClass:"group"},[n("div",{staticClass:"group-name"},[n("pt-title",{attrs:{important:"",type:"text"}},[t._v("\n                        "+t._s(i)+":\n                    ")])],1),t._v(" "),n("div",{staticClass:"separation"})]),t._v(" "),n("div",{staticClass:"key-value-box"},t._l(e,function(e){return t.business.isHiddenField(e.name,t.carInfo.car)?t._e():n("car-info-detail-key-value",{key:e.name,attrs:{"car-info":t.carInfo.car,field:e,isEdit:t.isEdit&&!t.business.isDisableField(e.name,t.carInfo.car),validator:t.validator[e.name]},on:{valueClick:t.onValueClick}})}))]):t._e()}))])},staticRenderFns:[]};var hn=n("C7Lr")(fn,dn,!1,function(t){n("p7X3"),n("m0Bu")},"data-v-83f9d4ac",null).exports;function pn(t){if("undefined"!=typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var i=new FormData;t.data&&q()(t.data).forEach(function(e){i.append(e,t.data[e])}),i.append(t.filename,t.file,t.file.name),e.onerror=function(e){t.onError(e)},e.onload=function(){return e.status<200||e.status>=300?t.onError(function(t,e,n){var i=void 0;i=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+t+" "+n.status;var a=new Error(i);return a.status=n.status,a.method="post",a.url=t,a}(n,0,e)):(t.onSuccess(function(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(t){return e}}(e)),null)},e.open("put",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var a=t.headers||{};q()(a).forEach(function(t){Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]&&e.setRequestHeader(t,a[t])}),e.send(i)}}var mn={name:"cars-insert-excel-dialog-list",props:{manager:{type:Object}},mounted:function(){},data:function(){return{fileUrl:"",dialogVisible:!1,dialogTwo:!1,note:"",uploadData:{dataName:"excel"},excelUid:"",operationToken:"",mode:{type:String}}},computed:{business:function(){return this.manager.listBusiness},fields:function(){return this.manager.listFields},carsInfoListfromExcel:{get:function(){return this.manager.carsInfoListfromExcel?this.manager.carsInfoListfromExcel:this.manager.newCarsInfoList},set:function(t){this.manager.carsInfoListfromExcel?this.manager.carsInfoListfromExcel=t:this.manager.newCarsInfoList&&(this.manager.newCarsInfoList=t)}},headers:function(){return{operationToken:this.operationToken,"Ocp-Apim-Subscription-Key":"ad91c2f95eab4af7aa1efe4adb9a6e60"}},isDialogAllChecked:{get:function(){return this.manager.isDialogAllChecked},set:function(t){this.manager.isDialogAllChecked=t}},isDialogHasChecked:{get:function(){return this.manager.isDialogHasChecked}},dialogBatchAction:{get:function(){return this.manager.dialogBatchAction}},carInfoMode:{get:function(){return"CarsInfoList"===this.$route.name}},receiptModel:{get:function(){return"ReceiptDetail"===this.$route.name}},dialogBtnSize:{get:function(){return this.carInfoMode?"mini":"small"}}},methods:{createResource:function(){var t=this;this.manager.onShowDetail(!1),this.manager.onCancelDialogBatchAction(),this.manager.carsInfoListfromExcel&&this.loadResource().then(function(e){t.operationToken=e.operationToken,t.excelUid=e.uid,t.fileUrl="https://resource-api-test.ptit365.com/v1/"+t.excelUid})},loadResource:function(){return z.createOneResource("")},handleSuccess:function(){this.manager.loadExcelCarsList(this.excelUid),this.dialogVisible=!0},upload:function(t){return pn(t)},showInsertDialog:function(){this.carsInfoListfromExcel=[],this.dialogVisible=!0},closeInsertDialog:function(){var t=this;if(0!==this.carsInfoListfromExcel.length){(this.manager.saveCarsForExcel?this.manager.saveCarsForExcel:this.manager.InsertCarInfosToList)().then(function(){t.carsInfoListfromExcel=[],t.manager.saveCarsForExcel&&(t.manager.loadCarsInfoList(),t.manager.remark=""),t.dialogVisible=!1,t.dialogTwo=!1,t.manager.saveCarsForExcel?t.$message({type:"success",message:"添加成功！"}):t.$message({type:"success",message:"已添加可添加项！"})}).catch(function(){t.$message({type:"error",message:"添加失败！"})})}},cancelDialog:function(){this.dialogVisible=!1,this.carsInfoListfromExcel=[]},showDialogTwo:function(){if(0===this.carsInfoListfromExcel.length)return this.$message({type:"error",message:"无数据保存！"}),void(this.dialogVisible=!1);this.manager.saveCarsForExcel?this.dialogTwo=!0:this.closeInsertDialog()},closeDialogTwo:function(){this.dialogTwo=!1},carInfoSelect:function(t){this.$emit("carInfoSelect",t)},goCarInfoDetail:function(t){this.$emit("goCarInfoDetail",t)},deleteCarInfo:function(t){this.$emit("deleteCarInfo",t)},onDialogBatchAction:function(){this.$emit("onDialogBatchAction")},onCancelDialogBatchAction:function(){this.$emit("onCancelDialogBatchAction")},onDialogBatchDelete:function(){this.$emit("onDialogBatchDelete")},onSelectSearchInfo:function(t){this.manager.onSelectSearchInfo(t)}}},gn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-row"},[t.carInfoMode||t.receiptModel?n("el-upload",{ref:"upload",staticClass:"upload-box upload-demo",attrs:{action:t.fileUrl,"http-request":t.upload,data:t.uploadData,headers:t.headers,"on-success":t.handleSuccess,"show-file-list":!1}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.createResource}},[t._v("导入车辆")])],1):t._e(),t._v(" "),t.carInfoMode?t._e():n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.showInsertDialog}},[t._v("添加车辆")]),t._v(" "),t.dialogVisible?n("el-dialog",{attrs:{title:t.carInfoMode?"导入车辆信息":"添加车辆",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"note-content"},[n("div",{staticClass:"top-button-left"},[t.carInfoMode||t.dialogBatchAction?t._e():[n("search-input",{ref:"searchInput",staticClass:"btn-box search-input",attrs:{types:["vId","eId","note"],expectedTypes:["vId","vIds"]},on:{select:t.onSelectSearchInfo}})]],2)]),t._v(" "),n("div",{staticClass:"note-content"},[n("div",{staticClass:"top-button-left"},[!t.dialogBatchAction&&t.carsInfoListfromExcel.length?[n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"primary"},on:{click:t.onDialogBatchAction}},[t._v("批量操作")])],1)]:t._e(),t._v(" "),t.dialogBatchAction?[n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"danger"},on:{click:t.onDialogBatchDelete}},[t._v("删除")])],1),t._v(" "),n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"primary"},on:{click:t.onCancelDialogBatchAction}},[t._v("取消")])],1)]:t._e()],2)]),t._v(" "),n("div",{staticClass:"content-top"},[n("grid-head-row",[t.dialogBatchAction?n("grid-head-column",{attrs:{flexWidth:"0 0 30px",textAlign:"center"}},[n("el-checkbox",{attrs:{indeterminate:t.isDialogHasChecked&&!t.isDialogAllChecked},model:{value:t.isDialogAllChecked,callback:function(e){t.isDialogAllChecked=e},expression:"isDialogAllChecked"}})],1):t._e(),t._v(" "),t._l(t.manager.listFields,function(e){return t.business.isHiddenField(e.name)?t._e():n("grid-head-column",{key:e.name,attrs:{flexWidth:e.getOption("contentWidth","0 0 auto"),textAlign:e.getOption("contentAlign","center")}},[t._v("\n                    "+t._s(e.label)+"\n                ")])}),t._v(" "),t.carInfoMode?n("grid-head-column",{attrs:{flexWidth:"0 0 90px",textAlign:"center"}},[t._v("\n                    提示\n                ")]):t._e(),t._v(" "),n("grid-head-column",{attrs:{flexWidth:"0 0 80px",textAlign:"right"}})],2)],1),t._v(" "),n("div",{staticClass:"content"},[t._l(t.carsInfoListfromExcel,function(e){return[n("cars-info-list-item",{key:e.car.vId,attrs:{fields:t.manager.listFields,item:e,"batch-action":t.dialogBatchAction,business:t.business,mode:"dialog"},on:{carInfoSelect:t.carInfoSelect,goCarInfoDetail:t.goCarInfoDetail,deleteCarInfo:t.deleteCarInfo}})]}),t._v(" "),0===t.carsInfoListfromExcel.length?n("p",{staticClass:"content-p"},[t._v("\n                "+t._s(t.carInfoMode?"请导入数据":"请搜索以添加数据")+"\n            ")]):t._e()],2),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.cancelDialog}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showDialogTwo}},[t._v("确定")])],1)]):t._e(),t._v(" "),t.dialogTwo?n("el-dialog",{attrs:{title:"备注信息",visible:t.dialogTwo,width:"30%"},on:{"update:visible":function(e){t.dialogTwo=e}}},[n("div",{staticClass:"smmary"},[n("pt-title",{staticStyle:{width:"50px"},attrs:{size:"14",type:"text"}},[t._v("备注:")]),t._v(" "),n("el-input",{staticStyle:{width:"250px"},attrs:{size:"mini"},model:{value:t.manager.remark,callback:function(e){t.$set(t.manager,"remark",e)},expression:"manager.remark"}})],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialogTwo}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.closeInsertDialog}},[t._v("确定")])],1)]):t._e()],1)},staticRenderFns:[]};var vn=n("C7Lr")(mn,gn,!1,function(t){n("yeFe"),n("7fGa")},"data-v-1cd57209",null).exports,yn=n("0MWo"),Cn=n.n(yn),_n={name:"CarInfoDetailKeyValue",props:{carInfo:{type:Object,required:!0},field:{type:Object,required:!0},isEdit:{type:Boolean,required:!1,default:!1},validator:{type:Object,required:!0}},computed:{csvFieldType:{get:function(){return"CSV"===this.field.fieldType}},numberValue:{get:function(){return this.field.fieldType===Number}},dateValue:{get:function(){return this.field.fieldType===Date}},label:{get:function(){return this.field.label}},value:{get:function(){var t=this.carInfo.getValue(this.field.name);return this.csvFieldType?k.a.defaultTo(k.a.first(t.split(",")),""):this.numberValue&&t&&""+Cn()(t)?Cn()(t).toFixed(3):this.dateValue&&/^\d{5}(.\d{3})?$/.test(t)?D()("1900").add(t,"days").format("YYYY-MM-DD"):t},set:function(t){this.carInfo[this.field.name]=t.trim()}},processedValue:{get:function(){return this.value?this.value:"暂无"+this.label}},valueFormat:{get:function(){return this.value?this.csvFieldType?"number":"":"date"}},valueSize:{get:function(){return this.value?"18":"16"}}},methods:{onValueClick:function(){this.$emit("valueClick",this.carInfo,this.field)}}},In={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"car-info-detail-key-value"},[n("div",{staticClass:"label"},[n("pt-title",{attrs:{type:"text",size:"14"}},[t._v("\n            "+t._s(t.label)+":\n        ")])],1),t._v(" "),n("div",{staticClass:"value"},[t.isEdit?n("pt-input",{attrs:{"input-type":t.field.inputType,validate:t.validator,tooltip:t.validator.message,size:"small"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):n("pt-title",{class:t.csvFieldType?"underscore":"",attrs:{important:!!t.value,ignore:!t.value,format:t.valueFormat,size:t.valueSize,type:"text"}},[n("span",{on:{click:t.onValueClick}},[t._v(t._s(t.processedValue))])])],1)])},staticRenderFns:[]};var kn=n("C7Lr")(_n,In,!1,function(t){n("CLEt")},null,null).exports,xn={name:"CarFieldValue",props:{field:{type:Object,required:!0},item:{type:Object,required:!0},editMode:{type:Boolean,default:!1},fetchSuffixIcon:{type:Function,default:function(t,e){return e.car.getValue(t.name)?{icon:"",iconType:"success",message:"已匹配"}:{icon:"",iconType:"error",message:"未匹配"}}}},methods:{onIconClick:function(t,e){this.$emit("iconClick",t,e)},onSuffixIconClick:function(t,e,n){this.$emit("suffixIconClick",t,e,n)}},computed:{carInfo:function(){return this.item.car},csvFieldType:{get:function(){return"CSV"===this.field.fieldType}},numberValue:{get:function(){return this.field.fieldType===Number}},dateValue:{get:function(){return this.field.fieldType===Date}},text:{get:function(){return k.a.isEmpty(this.value)?"--":this.value}},value:{get:function(){var t=this.carInfo.getValue(this.field.name);return this.csvFieldType?k.a.defaultTo(k.a.first(t.split(",")),""):this.numberValue&&t&&""+Cn()(t)?Cn()(t).toFixed(3):this.dateValue&&/^\d{5}(.\d{3})?$/.test(t)?D()("1900").add(t,"days").format("YYYY-MM-DD"):t},set:function(t){this.carInfo[this.field.name]=t}},suffixMode:{get:function(){return this.field.getOption("suffix",!1)}},suffixIcon:{get:function(){return this.suffixMode?this.fetchSuffixIcon(this.field,this.item):{icon:"",iconType:"error",message:""}}},suffixIconClass:{get:function(){return{"suffix-icon":!0,"suffix-icon-success":"success"===this.suffixIcon.iconType,"suffix-icon-error":!this.suffixIcon.iconType||"error"===this.suffixIcon.iconType}}},compositeMode:function(){return"composite"===this.field.type||"business"===this.field.type&&"composite"===this.field.innerField.type},icon:function(){return this.field.getOption("icon","")},displayIcon:function(){return"icon"===this.field.getOption("display","")},iconClasses:function(){var t=this.icon;if(!k.a.isEmpty(t)){var e={fa:!0,selected:this.item.car.getValue(this.field.name)};return e[t="fa-"+t]=!0,e}return[]}}},bn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field-value"},[t.compositeMode?t._l(t.field.children,function(e){return n("car-field-value",{key:e.name,attrs:{field:e,item:t.item,"edit-mode":t.editMode,"fetch-suffix-icon":t.fetchSuffixIcon},on:{iconClick:t.onIconClick,suffixIconClick:t.onSuffixIconClick}})}):t.displayIcon?n("el-tooltip",{attrs:{content:t.item.car[t.field.name],effect:"light",placement:"top"}},[n("i",{class:t.iconClasses,on:{click:function(e){e.stopPropagation(),t.onIconClick(t.item,t.field)}}})]):t.editMode?n("pt-input",{attrs:{"input-type":t.field.inputType,validate:t.item.validator[t.field.name],tooltip:t.item.validator[t.field.name].message,size:"small"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):n("pt-title",{attrs:{size:"14",type:"text",important:""}},[t._v("\n        "+t._s(t.text)+"\n    ")]),t._v(" "),t.suffixMode&&t.suffixIcon.icon?n("div",{class:t.suffixIconClass},[n("el-tooltip",{attrs:{content:t.suffixIcon.message,effect:"light",placement:"top"}},[n("i",{class:t.suffixIcon.icon,on:{click:function(e){e.stopPropagation(),t.onSuffixIconClick(t.item,t.field,t.suffixIcon)}}})])],1):t._e()],2)},staticRenderFns:[]};var Dn=n("C7Lr")(xn,bn,!1,function(t){n("HB+j")},"data-v-fe1d1c08",null).exports,wn={name:"CarListDialog",mixins:[{props:{visible:{type:Boolean,default:!1}},data:function(){return{isDialogShow:!1}},methods:{closeDialog:function(t){t?this.onDialogOk()&&this.$emit("dialogOk"):this.isDialogShow=!1},onDialogOk:function(){return!0},onDialogShow:function(){}},watch:{isDialogShow:function(t){this.$emit("update:visible",t)},visible:function(t){this.isDialogShow=t,t&&this.onDialogShow()}}}],data:function(){return{dialogBatchAction:!1}},props:{business:{type:Object,required:!0},fields:{type:Array,required:!0},lines:{type:Array,required:!0},showStatus:{type:Boolean,default:!1},mode:{type:String}},methods:{onEvent:function(t,e){this.$emit(t,e)},onDialogBatchAction:function(){this.dialogBatchAction=!0},onCancelDialogBatchAction:function(){this.dialogBatchAction=!1,this.clearChecked()},onDialogBatchDelete:function(){var t=this;this.$confirm("是否确认删除选中项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.removeDeletedCarInfo(t.fetchCheckedCarInfo()).then(function(){t.$message({type:"success",message:"删除成功！"}),t.emptyListCancelBatchAction()}).catch(function(){t.$message({type:"error",message:"删除失败！"})})}).catch(function(){})},onSelectSearchInfo:function(t){this.$emit("onSelectSearchInfo",t)},clearChecked:function(){k.a.each(this.lines,function(t){t.isChecked=!1})},onCarInfoSelect:function(t){k.a.each(this.lines,function(t){t.isSelect=!1}),t.isSelect=!0},onDeleteCarInfo:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.removeDeletedCarInfo([t]).then(function(){e.$message({type:"success",message:"删除成功！"}),e.emptyListCancelBatchAction()}).catch(function(){e.$message({type:"error",message:"删除失败！"})})}).catch(function(){})},removeDeletedCarInfo:function(t){var e=this;return g()(p.a.mark(function n(){return p.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return k.a.each(t,function(t){return e.lines.splice(e.lines.indexOf(t),1)}),n.abrupt("return",t);case 2:case"end":return n.stop()}},n,e)}))()},emptyListCancelBatchAction:function(){this.lines.length||this.onCancelDialogBatchAction()},fetchCheckedCarInfo:function(){return k.a.filter(this.lines,function(t){return t.isChecked})},stateColor:function(t){switch(t.status){case-1:return"green";case 0:return"#2c96fd";case 1:return"red"}return""}},computed:{lineStatus:function(){return"ok"},title:function(){switch(this.mode){case"carsExcel":return"导入车辆信息";case"selectCar":return"添加车辆";default:return""}},messageContent:function(){switch(this.mode){case this.mode===this.carsExcel:return"请导入数据";case this.mode===this.selectCar:return"请搜索以添加数据";default:return""}},headers:function(){return{operationToken:this.operationToken,"Ocp-Apim-Subscription-Key":"ad91c2f95eab4af7aa1efe4adb9a6e60"}},carsExcel:{get:function(){return"carsExcel"===this.mode}},selectCar:{get:function(){return"selectCar"===this.mode}},dialogBtnSize:{get:function(){return this.carsExcel?"mini":"small"}},isDialogAllChecked:{get:function(){return this.lines.length&&!k.a.some(this.lines,function(t){return!t.isChecked})},set:function(t){k.a.each(this.lines,function(e){e.isChecked=t})}},isDialogHasChecked:{get:function(){return k.a.some(this.lines,function(t){return t.isChecked})}}}},Sn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.title,visible:t.isDialogShow,width:"90%"},on:{"update:visible":function(e){t.isDialogShow=e}}},[n("pt-layout",{attrs:{"vertical-mode":"",fixedBlockBasis:"0 0 50px"}},[n("div",{staticClass:"flex-row search-line",attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"col button-list"},[t.selectCar&&!t.dialogBatchAction?[n("search-input",{ref:"searchInput",staticClass:"btn-box search-input",attrs:{types:["vId","eId","note","receipt"],expectedTypes:["vId","vIds"]},on:{select:t.onSelectSearchInfo}})]:t._e(),t._v(" "),!t.dialogBatchAction&&t.lines.length?[n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"primary"},on:{click:t.onDialogBatchAction}},[t._v("批量操作")])],1)]:t._e(),t._v(" "),t.dialogBatchAction?[n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"danger"},on:{click:t.onDialogBatchDelete}},[t._v("删除")])],1),t._v(" "),n("div",{staticClass:"btn-box"},[n("el-button",{attrs:{size:t.dialogBtnSize,type:"primary"},on:{click:t.onCancelDialogBatchAction}},[t._v("取消")])],1)]:t._e()],2)]),t._v(" "),n("pt-layout",{staticClass:"car-info-list-container",attrs:{slot:"second","grow-block-scroll":!0,"vertical-mode":"",fixedBlockBasis:"none"},slot:"second"},[n("grid-head-row",{attrs:{slot:"first"},slot:"first"},[t.dialogBatchAction?n("grid-head-column",{attrs:{flexWidth:"0 0 30px",textAlign:"center"}},[n("el-checkbox",{attrs:{indeterminate:t.isDialogHasChecked&&!t.isDialogAllChecked},model:{value:t.isDialogAllChecked,callback:function(e){t.isDialogAllChecked=e},expression:"isDialogAllChecked"}})],1):t._e(),t._v(" "),t._l(t.fields,function(e){return t.business.isHiddenField(e.name)?t._e():n("grid-head-column",{key:e.name,attrs:{flexWidth:e.getOption("contentWidth","0 0 auto"),textAlign:e.getOption("contentAlign","center")}},[t._v("\n                    "+t._s(e.label)+"\n                ")])}),t._v(" "),t.showStatus?n("grid-head-column",{attrs:{flexWidth:"0 0 90px",textAlign:"center"}},[t._v("\n                    提示\n                ")]):t._e(),t._v(" "),n("grid-head-column",{attrs:{flexWidth:"0 0 80px",textAlign:"right"}})],2),t._v(" "),n("div",{staticClass:"content-list",attrs:{slot:"second"},slot:"second"},[t._l(t.lines,function(e){return[n("cars-info-list-item",{key:e.car.vId,attrs:{fields:t.fields,item:e,"batch-action":t.dialogBatchAction,business:t.business,mode:"dialog"},on:{carInfoSelect:function(n){t.onCarInfoSelect(e)}}},[n("template",{slot:"line-suffix"},[t.showStatus?n("grid-cell",{attrs:{flexWidth:"0 0 90px","justify-content":"center"}},[[n("pt-title",{style:{color:t.stateColor(e)},attrs:{size:"14",type:"text",important:""}},[t._v(t._s(e.statusText))])]],2):t._e(),t._v(" "),e.isSelect?n("grid-cell",{attrs:{flexWidth:"0 0 40px","justify-content":"flex-end"}},[[n("el-button",{staticClass:"icon-btn",attrs:{icon:"el-icon-delete",type:"danger"},on:{click:function(n){t.onDeleteCarInfo(e)}}})]],2):t._e()],1)],2)]}),t._v(" "),0===t.lines.length?n("p",{staticClass:"content-p"},[t._v("\n                    "+t._s(t.messageContent)+"\n                ")]):t._e()],2)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.closeDialog(!1)}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.closeDialog(!0)}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var Ln=n("C7Lr")(wn,Sn,!1,function(t){n("/M3h")},"data-v-e54788d4",null).exports,Bn={name:"CarExcelImporter",data:function(){return{fileUrl:"",uploadData:{dataName:"excel"},excelUid:"",operationToken:""}},props:{business:{type:Object,required:!0},text:{type:String,default:"导入车辆"},buttonType:{type:String,default:"primary"}},computed:{headers:function(){return{operationToken:this.operationToken,"Ocp-Apim-Subscription-Key":"ad91c2f95eab4af7aa1efe4adb9a6e60"}}},methods:{createResource:function(){var t=this;this.loadResource().then(function(e){t.operationToken=e.operationToken,t.excelUid=e.uid,t.fileUrl="https://resource-api-test.ptit365.com/v1/"+t.excelUid})},loadResource:function(){return z.createOneResource("")},upload:function(t){return pn(t)},handleSuccess:function(){var t=this;return g()(p.a.mark(function e(){var n,i,a,s,r,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,z.queryResourceContent(t.excelUid,"excel",{overrideContentType:"application/excel-2-json"});case 3:for(i=e.sent,n=Xt(i),a=n.defaultSheet.getMaxRows(),s=[],r=1;r<=a;r++)o=n.defaultSheet.getRowAsObject(r),c=k.a.values(o),k.a.every(c,function(t){return t.isEmptyValue()})||s.push(t.business.createCarLine(o,!0));t.$emit("importCompleted",s);case 9:case"end":return e.stop()}},e,t)}))()}}},Tn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-upload",{ref:"upload",staticClass:"upload-box upload-demo",attrs:{action:t.fileUrl,"http-request":t.upload,data:t.uploadData,headers:t.headers,"on-success":t.handleSuccess,"show-file-list":!1}},[n("el-button",{attrs:{size:"mini",type:t.buttonType},on:{click:t.createResource}},[t._v(t._s(t.text))])],1)],1)},staticRenderFns:[]};var En=n("C7Lr")(Bn,Tn,!1,function(t){n("rV1F")},"data-v-512557f9",null).exports,Rn={install:function(t){t.component(on.name,on),t.component(un.name,un),t.component(hn.name,hn),t.component(vn.name,vn),t.component(kn.name,kn),t.component(Dn.name,Dn),t.component(Ln.name,Ln),t.component(En.name,En)}},An={name:"DocumentListItem",props:{item:{type:Object,required:null}},data:function(){return{isHover:!1}},computed:{title:{get:function(){return this.item.title}},time:{get:function(){return this.item.updateTime}},status:function(){switch(this.item.status){case"draft":return"草稿";case"confirmed":return"已确认";default:return""}},statusColor:function(){switch(this.item.status){case"draft":return'#2c96fd"';case"confirmed":return"green";default:return""}},summary:{get:function(){return this.item.summary?this.item.summary.split(","):[]}}},methods:{handleMouseenter:function(){this.isHover=!0},handleMouseleave:function(){this.isHover=!1},onDeleteDocument:function(t){var e=this;this.$confirm("此删除操作将永久删除文档，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$emit("deleteDocument",t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},goDetail:function(){this.$emit("goDetail",this.item)}}},Mn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"document-list-item",on:{mouseenter:t.handleMouseenter,mouseleave:t.handleMouseleave}},[n("div",{staticClass:"document-body"},[n("div",{staticClass:"body-left"},[n("div",{staticClass:"row-box",on:{click:t.goDetail}},[n("pt-title",{staticClass:"key",attrs:{secondary:"",type:"text",size:"12"}},[t._v("\n                    标题：\n                ")]),t._v(" "),n("pt-title",{staticClass:"value ",style:{color:t.statusColor},attrs:{important:"",size:"5",type:"title"}},[n("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),n("pt-title",{staticClass:"value",attrs:{size:"12",type:"text",format:"date"}},[t._v("\n                        【\n                        "+t._s(t.item.receiptCode)+"\n                        】\n                    ")])],1)],1),t._v(" "),n("div",{staticClass:"row-box"},[n("pt-title",{staticClass:"key",attrs:{secondary:"",type:"text",size:"12"}},[t._v("\n                    概要：\n                ")]),t._v(" "),n("pt-title",{staticClass:"value",attrs:{important:"",minor:"",type:"title",size:"7"}},[t.summary.length?[t._v("\n                        "+t._s("共"+t.summary.length+"辆车")+"\n                        "),n("pt-title",{staticClass:"value",attrs:{size:"12",type:"text",format:"date"}},[t._v("\n                            （\n                            "+t._s(t.summary.slice(0,5).join(",")+"等")+"\n                            ）\n                        ")])]:[t._v("\n                        单据内无车辆信息\n                    ")]],2)],1)]),t._v(" "),n("div",{staticClass:"middle"},[t.isHover?n("div",{staticClass:"document-operation"},["draft"===t.item.status?n("el-button",{staticClass:"btn",attrs:{type:"mini"},on:{click:function(e){e.stopPropagation(),t.onDeleteDocument(t.item)}}},[t._v("\n                    删除\n                ")]):t._e()],1):t._e()]),t._v(" "),n("hr",{staticClass:"separation",style:{"background-color":t.statusColor}}),t._v(" "),n("div",{staticClass:"body-right"},[n("div",{staticClass:"position"},[n("div",{staticClass:"row-box"},[n("pt-title",{staticClass:"key",attrs:{secondary:"",type:"text",size:"12"}},[t._v("\n                        类型：\n                    ")]),t._v(" "),n("pt-title",{staticClass:"value",attrs:{type:"text",size:"14"}},[t._v("\n                        "+t._s(t.item.typeName)+"\n                    ")])],1),t._v(" "),n("div",{staticClass:"row-box"},[n("pt-title",{staticClass:"key",attrs:{secondary:"",type:"text",size:"12"}},[t._v("\n                        状态：\n                    ")]),t._v(" "),n("pt-title",{staticClass:"value",style:{color:t.statusColor},attrs:{type:"text",size:"14"}},[t._v("\n                        "+t._s(t.status)+"\n                    ")])],1),t._v(" "),n("div",{staticClass:"row-box"},[n("pt-title",{staticClass:"key",attrs:{secondary:"",type:"text",size:"12"}},[t._v("\n                        更新时间：\n                    ")]),t._v(" "),n("pt-title",{staticClass:"value",attrs:{type:"text",size:"14"}},[t._v("\n                        "+t._s(t.time)+"\n                    ")])],1)])])])])},staticRenderFns:[]};var On=n("C7Lr")(An,Mn,!1,function(t){n("poOu")},"data-v-15fc0ca4",null).exports,Fn={name:"file-list",props:{fileList:{type:Object},receiptDetail:{type:Object},manager:{type:Object},fileCompareCar:{type:Function},receiptStatus:{type:Boolean}},data:function(){return{exceldata:"",uploadData:{refreshToken:!1},operationToken:""}},computed:{fileUrl:function(){return"https://resource-api-test.ptit365.com/v1/"+this.receiptDetail.id},headers:function(){return{operationToken:this.operationToken,"Ocp-Apim-Subscription-Key":"ad91c2f95eab4af7aa1efe4adb9a6e60"}},fiexBlockBasis:function(){return this.receiptStatus?"50px":"auto"}},mounted:function(){},methods:{cleaAllrFiles:function(){this.$emit("cleaAllrFiles",this.fileList)},fileSelect:function(t){this.fileList.onFileSelect(t,this.fileList.files)},fileToCar:function(t){this.$emit("fileToCar",t)},getResource:function(){var t=this;this.fileList.getResource(this.receiptDetail.id).then(function(e){t.operationToken=e.status.operationToken})},upload:function(t){return t.data.dataName=t.file.name,pn(t)},handleSuccess:function(t,e){this.exceldata=t.data,this.compareFiles(e)},deleteFile:function(t){this.$emit("deleteFile",t,this.fileList)},compareFiles:function(t){var e=this.fileList.createItem(t.name);if(!this.fileList.ifHasItem(e,this.fileList.files)){this.fileList.addFileItem(t.name);var n=k.a.find(this.receiptDetail.carsInfoList,function(t){return t.car.vId===e.vId});n&&(n.car[this.receiptDetail.type]=e.receiptCode)}}}},jn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pt-layout",{attrs:{"fixed-block-basis":t.fiexBlockBasis,verticalMode:""}},[t.receiptStatus?n("pt-layout",{staticStyle:{"align-items":"center"},attrs:{slot:"first"},slot:"first"},[n("div",{staticClass:"upload-demo",attrs:{slot:"first"},slot:"first"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.cleaAllrFiles}},[t._v("\n                全部清除\n            ")])],1),t._v(" "),n("div",{staticClass:"upload-demo upload-block",attrs:{slot:"second"},slot:"second"},[n("el-upload",{ref:"upload",attrs:{action:t.fileUrl,"http-request":t.upload,data:t.uploadData,headers:t.headers,"on-success":t.handleSuccess,"show-file-list":!1,multiple:""}},[n("el-tooltip",{attrs:{content:"可批量上传附件，附件将自动与车辆进行匹配",placement:"top",effect:"light"}},[n("i",{staticClass:"el-icon-info",staticStyle:{color:"#909399"}})]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.getResource}},[t._v("上传附件")])],1)],1)]):t._e(),t._v(" "),n("pt-layout",{attrs:{slot:"second",verticalMode:"","grow-block-scroll":"",fixedBlockBasis:"auto"},slot:"second"},[n("div",{staticClass:"content-top",attrs:{slot:"first"},slot:"first"},[n("grid-head-row",[n("grid-head-column",{attrs:{flexWidth:"0 0 500px",textAlign:"left"}},[t._v("\n                    附件名称\n                ")]),t._v(" "),n("grid-head-column",{attrs:{flexWidth:"0 0 180px",textAlign:"left"}},[t._v("\n                    VIN码\n                ")]),t._v(" "),n("grid-head-column",{attrs:{flexWidth:"0 0 30px",textAlign:"left"}},[t._v("\n                    匹配\n                ")])],1)],1),t._v(" "),n("div",{attrs:{slot:"second"},slot:"second"},[t._l(t.fileList.files,function(e){return[n("file-list-item",{key:e.fileName,attrs:{item:e,mode:t.fileList.name,"fetch-suffix-icon":t.fileCompareCar},on:{deleteFile:t.deleteFile,fileSelect:t.fileSelect,fileToCar:t.fileToCar}})]}),t._v(" "),0===t.fileList.files.length?n("p",{staticClass:"content-p"},[t._v("\n                暂无数据\n            ")]):t._e()],2)])],1)},staticRenderFns:[]};var $n=n("C7Lr")(Fn,jn,!1,function(t){n("SnRW"),n("ZC+V")},"data-v-1ab8454a",null).exports,Nn={name:"file-list-item",props:{item:{type:Object},mode:{type:String},batchAction:{type:Boolean,default:!1},fetchSuffixIcon:{type:Function,required:!0}},data:function(){return{}},computed:{fileListItemClass:{get:function(){return{"file-list-item":!0,"file-list-item-select":this.item.isSelect}}},vidTitle:function(){return{vidTitle:this.item.fileCheck}},suffix:function(){return this.fetchSuffixIcon&&(this.item.fileCheck=this.fetchSuffixIcon(this.item)),this.item.fileCheck}},methods:{fileToCar:function(){this.item.fileCheck&&this.$emit("fileToCar",this.item.vId)},deleteFile:function(){this.$emit("deleteFile",this.item)},fileSelect:function(){this.$emit("fileSelect",this.item)}}},Vn={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.fileListItemClass,on:{click:t.fileSelect}},[t.batchAction?n("grid-cell",{attrs:{flexWidth:"0 0 30px","justify-content":"center"}},[[n("div",{on:{click:function(t){t.stopPropagation()}}},[n("el-checkbox",{model:{value:t.item.isChecked,callback:function(e){t.$set(t.item,"isChecked",e)},expression:"item.isChecked"}})],1)]],2):t._e(),t._v(" "),n("grid-cell",{attrs:{flexWidth:"0 0 500px","justify-content":"left"}},[[n("pt-title",{attrs:{size:"14",type:"text",important:""}},[t._v(t._s(t.item.fileName))])]],2),t._v(" "),n("grid-cell",{attrs:{flexWidth:"0 0 180px","justify-content":"left"}},[[n("div",{on:{click:t.fileToCar}},[n("pt-title",{class:t.vidTitle,attrs:{size:"14",type:"text",important:""}},[t._v(t._s(t.item.vId))])],1)]],2),t._v(" "),"carInfoFiles"===t.mode?n("grid-cell",{attrs:{flexWidth:"0 0 30px","justify-content":"center"}},[t.suffix?t._e():[n("el-tooltip",{attrs:{content:"未匹配",placement:"top",effect:"light"}},[n("i",{staticClass:"el-icon-error",staticStyle:{color:"#f56c6c"}})])],t._v(" "),t.suffix?[n("el-tooltip",{attrs:{content:"匹配成功",placement:"top",effect:"light"}},[n("i",{staticClass:"el-icon-success",staticStyle:{color:"#67c23a"}})])]:t._e()],2):t._e(),t._v(" "),n("grid-cell",{attrs:{flexWidth:"0 0 60px","justify-content":"flex-end"}},[t.item.isSelect?[[n("el-button",{staticClass:"icon-btn",attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:t.deleteFile}})]]:t._e()],2)],1)},staticRenderFns:[]};var zn=n("C7Lr")(Nn,Vn,!1,function(t){n("Zmqa")},"data-v-04ccde04",null).exports,Un={install:function(t){t.component(On.name,On),t.component($n.name,$n),t.component(zn.name,zn)}},Hn=function(){};i.default.use(Xe),i.default.use(oe.a),i.default.use(an),i.default.use(Rn),i.default.use(Un),i.default.use(Hn),i.default.config.productionTip=!1,new i.default({el:"#app",router:se,components:{App:s},template:"<App/>"})},wfi3:function(t,e){},yL6t:function(t,e){},yeFe:function(t,e){}},["vkxV"]);
//# sourceMappingURL=app.edc85cd3238cc33cda57.js.map